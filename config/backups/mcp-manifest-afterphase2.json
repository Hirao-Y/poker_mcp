{
  "name": "pokerinput-mcp-final",
  "version": "4.2.0",
  "description": "本番環境対応 YAML-based radiation shielding calculation input file management tool with complete MCP support and production features - 17メソッド完全実装",
  "author": "yoshihiro hirao",
  "license": "ISC",
  "homepage": "http://localhost:3020",
  "repository": {
    "type": "git",
    "url": "https://github.com/Hirao-Y/pokerinput-mcp-final"
  },
  "mcp_version": "1.0.0",
  "server": {
    "name": "pokerinput-mcp-final-server",
    "version": "4.2.0",
    "description": "Complete MCP Server v4.2 - 17メソッド完全実装版（Detector系メソッド追加完了）",
    "port": 3020,
    "features": [
      "20メソッド完全実装",
      "Body操作系: 作成・更新・削除",
      "Zone操作系: 作成・更新・削除",
      "BuildupFactor操作系: 作成・更新・削除・順序変更",
      "Transform操作系: 作成・更新・削除",
      "Source操作系: 作成・更新・削除",
      "Detector操作系: 作成・更新・削除",
      "立体10タイプ完全対応",
      "材料13種類完全対応",
      "物理係数計算機能強化",
      "依存関係チェック機能",
      "実際のYAMLファイル更新",
      "自動バックアップ・ロールバック機能",
      "完全なエラーハンドリング",
      "JSON-RPC 2.0完全準拠"
    ]
  },
  "endpoints": {
    "jsonrpc": "/mcp",
    "root": "/",
    "health": "/health"
  },
  "capabilities": {
    "real_data_update": true,
    "automatic_backup": true,
    "error_handling": "complete",
    "validation": "comprehensive",
    "production_ready": true,
    "parameter_validation": "enhanced",
    "conditional_parameters": true,
    "structured_geometry": true,
    "structured_division": true,
    "body_operations": true,
    "zone_operations": true,
    "buildup_factor_operations": true,
    "transform_operations": true,
    "source_operations": true,
    "detector_operations": true,
    "dependency_checking": true,
    "order_management": true,
    "rollback_support": true
  },
  "tools": [
    {
      "name": "pokerinput_proposeBody",
      "description": "新しい3D立体を提案します（自動バックアップ付き）",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "$ref": "#/definitions/object_name",
          "description": "立体の一意な名前"
        },
        "type": {
          "type": "string",
          "description": "立体タイプ",
          "enum": ["SPH", "RCC", "RPP", "BOX", "CMB", "TOR", "ELL", "REC", "TRC", "WED"]
        },
        "center": {
          "$ref": "#/definitions/coordinate_string",
          "description": "中心座標 (x y z形式) - SPH,ELL,TOR用"
        },
        "radius": {
          "$ref": "#/definitions/positive_radius",
          "description": "半径 - SPH, RCC用"
        },
        "bottom_center": {
          "$ref": "#/definitions/coordinate_string",
          "description": "底面中心座標 (x y z形式) - RCC,TRC,REC用"
        },
        "height_vector": {
          "$ref": "#/definitions/coordinate_string",
          "description": "高さベクトル (x y z形式) - RCC,TRC,REC用"
        },
        "min": {
          "$ref": "#/definitions/coordinate_string",
          "description": "最小座標 (x y z形式) - RPP用"
        },
        "max": {
          "$ref": "#/definitions/coordinate_string",
          "description": "最大座標 (x y z形式) - RPP用"
        },
        "vertex": {
          "$ref": "#/definitions/coordinate_string",
          "description": "頂点座標 (x y z形式) - BOX,WED用"
        },
        "edge_1": {
          "$ref": "#/definitions/coordinate_string",
          "description": "エッジ1ベクトル (x y z形式) - BOX用"
        },
        "edge_2": {
          "$ref": "#/definitions/coordinate_string",
          "description": "エッジ2ベクトル (x y z形式) - BOX用"
        },
        "edge_3": {
          "$ref": "#/definitions/coordinate_string",
          "description": "エッジ3ベクトル (x y z形式) - BOX用"
        },
        "expression": {
          "type": "string",
          "description": "組み合わせ式 - CMB用"
        },
        "normal": {
          "$ref": "#/definitions/coordinate_string",
          "description": "法線ベクトル (x y z形式) - TOR用"
        },
        "major_radius": {
          "$ref": "#/definitions/positive_radius",
          "description": "主半径 - TOR用"
        },
        "minor_radius_horizontal": {
          "$ref": "#/definitions/positive_radius",
          "description": "水平方向副半径 - TOR用"
        },
        "minor_radius_vertical": {
          "$ref": "#/definitions/positive_radius",
          "description": "垂直方向副半径 - TOR用"
        },
        "radius_vector_1": {
          "$ref": "#/definitions/coordinate_string",
          "description": "半径ベクトル1 (x y z形式) - ELL,REC用"
        },
        "radius_vector_2": {
          "$ref": "#/definitions/coordinate_string",
          "description": "半径ベクトル2 (x y z形式) - ELL,REC用"
        },
        "radius_vector_3": {
          "$ref": "#/definitions/coordinate_string",
          "description": "半径ベクトル3 (x y z形式) - ELL用"
        },
        "bottom_radius": {
          "$ref": "#/definitions/positive_radius",
          "description": "底面半径 - TRC用"
        },
        "top_radius": {
          "$ref": "#/definitions/positive_radius",
          "description": "上面半径 - TRC用"
        },
        "width_vector": {
          "$ref": "#/definitions/coordinate_string",
          "description": "幅ベクトル (x y z形式) - WED用"
        },
        "depth_vector": {
          "$ref": "#/definitions/coordinate_string",
          "description": "奥行きベクトル (x y z形式) - WED用"
        },
        "transform": {
          "type": "string",
          "description": "適用する変換名"
        }
        },
        "required": ["name", "type"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_updateBody",
      "description": "既存立体のパラメータを更新します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "$ref": "#/definitions/object_name",
          "description": "更新する立体名"
        },
        "center": {
          "$ref": "#/definitions/coordinate_string",
          "description": "新しい中心座標 (x y z形式)"
        },
        "radius": {
          "$ref": "#/definitions/positive_radius",
          "description": "新しい半径"
        },
        "bottom_center": {
          "type": "string",
          "description": "新しい底面中心座標 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "height_vector": {
          "type": "string",
          "description": "新しい高さベクトル (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "min": {
          "type": "string",
          "description": "新しい最小座標 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "max": {
          "type": "string",
          "description": "新しい最大座標 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "normal": {
          "type": "string",
          "description": "新しい法線ベクトル (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "major_radius": {
          "type": "number",
          "description": "新しい主半径",
          "minimum": 0.001
        },
        "minor_radius_horizontal": {
          "type": "number",
          "description": "新しい水平方向副半径",
          "minimum": 0.001
        },
        "minor_radius_vertical": {
          "type": "number",
          "description": "新しい垂直方向副半径",
          "minimum": 0.001
        },
        "radius_vector_1": {
          "type": "string",
          "description": "新しい半径ベクトル1 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "radius_vector_2": {
          "type": "string",
          "description": "新しい半径ベクトル2 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "radius_vector_3": {
          "type": "string",
          "description": "新しい半径ベクトル3 (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "bottom_radius": {
          "type": "number",
          "description": "新しい底面半径",
          "minimum": 0.001
        },
        "top_radius": {
          "type": "number",
          "description": "新しい上面半径",
          "minimum": 0.001
        },
        "width_vector": {
          "type": "string",
          "description": "新しい幅ベクトル (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "depth_vector": {
          "type": "string",
          "description": "新しい奥行きベクトル (x y z形式)",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "transform": {
          "type": "string",
          "description": "適用する変換名"
        }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_deleteBody",
      "description": "立体を削除します（依存関係チェック付き）",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "削除する立体名",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_proposeZone",
      "description": "材料ゾーンを提案します（物理検証付き）",
      "parameters": {
        "type": "object",
        "properties": {
        "body_name": {
          "$ref": "#/definitions/object_name",
          "description": "ゾーンが適用される立体名"
        },
        "material": {
          "type": "string",
          "description": "材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials"
        },
        "density": {
          "$ref": "#/definitions/density_value",
          "description": "密度 (g/cm³)"
        }
        },
        "required": ["body_name", "material"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_updateZone",
      "description": "既存ゾーンの材料や密度を更新します",
      "parameters": {
        "type": "object",
        "properties": {
        "body_name": {
          "type": "string",
          "description": "更新するゾーンの立体名",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        },
        "material": {
          "type": "string",
          "description": "新しい材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials"
        },
        "density": {
          "type": "number",
          "description": "新しい密度 (g/cm³)",
          "minimum": 0.001,
          "maximum": 30.0
        }
        },
        "required": ["body_name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_deleteZone",
      "description": "ゾーンを削除します（ATMOSPHERE以外）",
      "parameters": {
        "type": "object",
        "properties": {
        "body_name": {
          "type": "string",
          "description": "削除するゾーンの立体名",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        }
        },
        "required": ["body_name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_proposeBuildupFactor",
      "description": "ビルドアップ係数を提案します（物理計算パラメータ付き）",
      "parameters": {
        "type": "object",
        "properties": {
        "material": {
          "type": "string",
          "description": "材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials",
          "examples": ["Concrete", "Lead", "Iron"]
        },
        "use_slant_correction": {
          "type": "boolean",
          "description": "スラント補正を使用するか（斜め入射補正）",
          "default": false,
          "note": "高精度計算時に有効"
        },
        "use_finite_medium_correction": {
          "type": "boolean",
          "description": "有限媒体補正を使用するか（境界効果補正）",
          "default": false,
          "note": "薄い遮蔽体での精度向上"
        }
        },
        "required": ["material"],
        "additionalProperties": false
      },
      "validation": {
        "material_uniqueness": "材料の重複チェック",
        "correction_combination": "補正組み合わせの物理妥当性チェック",
        "calculation_impact": "計算コストへの影響評価"
      }
    },
    {
      "name": "pokerinput_updateBuildupFactor",
      "description": "既存ビルドアップ係数の設定を更新します（計算精度パラメータ変更）",
      "parameters": {
        "type": "object",
        "properties": {
        "material": {
          "type": "string",
          "description": "更新する材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials",
          "pattern": "^[A-Za-z]+$",
          "maxLength": 20
        },
        "use_slant_correction": {
          "type": "boolean",
          "description": "新しいスラント補正設定（斜め入射時の補正）",
          "note": "変更により計算精度と処理時間が変化"
        },
        "use_finite_medium_correction": {
          "type": "boolean",
          "description": "新しい有限媒体補正設定（境界効果の補正）",
          "note": "薄い遮蔽材での精度向上効果"
        }
        },
        "required": ["material"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "材料の存在確認",
        "parameter_combination": "補正パラメータの組み合わせ妥当性",
        "calculation_consistency": "計算設定の一貫性チェック"
      }
    },
    {
      "name": "pokerinput_deleteBuildupFactor",
      "description": "ビルドアップ係数を削除します（計算から除外）",
      "parameters": {
        "type": "object",
        "properties": {
        "material": {
          "type": "string",
          "description": "削除する材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials",
          "pattern": "^[A-Za-z]+$",
          "maxLength": 20
        }
        },
        "required": ["material"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "ビルドアップ係数の存在確認",
        "usage_dependency": "計算での使用状況チェック",
        "safety_check": "削除の安全性確認"
      },
      "warnings": {
        "calculation_impact": "削除により計算精度が変化する可能性があります",
        "dependency_warning": "他の材料計算への影響を確認してください"
      }
    },
    {
      "name": "pokerinput_changeOrderBuildupFactor",
      "description": "ビルドアップ係数の計算順序を変更します（物理計算最適化）",
      "parameters": {
        "type": "object",
        "properties": {
        "material": {
          "type": "string",
          "description": "順序を変更する材料名",
          "$ref": "#/validation_enhanced/material_constraints/supported_materials",
          "pattern": "^[A-Za-z]+$",
          "maxLength": 20
        },
        "newIndex": {
          "$ref": "#/definitions/buildup_index",
          "description": "新しいインデックス位置（0から開始）",
          "note": "小さい値ほど優先度が高い"
        }
        },
        "required": ["material", "newIndex"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "材料の存在確認",
        "index_range": "インデックス範囲の妥当性チェック",
        "order_conflict": "順序変更による影響の評価"
      },
      "optimization": {
        "calculation_efficiency": "計算効率の最適化",
        "convergence_improvement": "収束性の向上",
        "memory_usage": "メモリ使用量の最適化"
      }
    },
    {
      "name": "pokerinput_proposeTransform",
      "description": "回転・移動変換を提案します（立体の幾何変換）",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "$ref": "#/definitions/object_name",
          "description": "変換の一意な名前"
        },
        "operations": {
          "type": "array",
          "description": "変換操作の配列（順序あり）",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "translate": {
                "$ref": "#/definitions/coordinate_string",
                "description": "平行移動ベクトル (x y z形式)"
              },
              "rotate_around_x": {
                "$ref": "#/definitions/rotation_angle",
                "description": "X軸周りの回転角度（度）"
              },
              "rotate_around_y": {
                "$ref": "#/definitions/rotation_angle",
                "description": "Y軸周りの回転角度（度）"
              },
              "rotate_around_z": {
                "$ref": "#/definitions/rotation_angle",
                "description": "Z軸周りの回転角度（度）"
              }
            },
            "note": "各操作は排他的（一つのオブジェクトに一つの操作のみ）"
          }
        }
        },
        "required": ["name", "operations"],
        "additionalProperties": false
      },
      "validation": {
        "name_uniqueness": "変換名の重複チェック",
        "operation_sequence": "操作順序の妥当性チェック",
        "geometric_validity": "幾何学的妥当性の確認"
      }
    },
    {
      "name": "pokerinput_updateTransform",
      "description": "既存変換の操作を更新します（幾何変換の再設定）",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "更新する変換名",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        },
        "operations": {
          "type": "array",
          "description": "新しい変換操作の配列",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "translate": {
                "type": "string",
                "description": "平行移動ベクトル (x y z形式)",
                "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
              },
              "rotate_around_x": {
                "type": "number",
                "description": "X軸周りの回転角度（度）",
                "minimum": -360,
                "maximum": 360
              },
              "rotate_around_y": {
                "type": "number",
                "description": "Y軸周りの回転角度（度）",
                "minimum": -360,
                "maximum": 360
              },
              "rotate_around_z": {
                "type": "number",
                "description": "Z軸周りの回転角度（度）",
                "minimum": -360,
                "maximum": 360
              }
            }
          }
        }
        },
        "required": ["name"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "変換の存在確認",
        "operation_validity": "操作パラメータの妥当性チェック",
        "usage_impact": "変換更新の影響範囲確認"
      }
    },
    {
      "name": "pokerinput_deleteTransform",
      "description": "変換を削除します（依存関係チェック付き）",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "削除する変換名",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        }
        },
        "required": ["name"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "変換の存在確認",
        "dependency_check": "依存する立体の確認",
        "safety_validation": "削除の安全性確認"
      },
      "warnings": {
        "dependency_impact": "依存する立体がある場合は削除できません"
      }
    },
    {
      "name": "pokerinput_proposeSource",
      "description": "新しい線源を提案します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "$ref": "#/definitions/object_name",
          "description": "線源の名前（一意である必要があります）"
        },
        "type": {
          "type": "string",
          "description": "線源タイプ",
          "enum": ["POINT", "SPH", "RCC", "RPP", "BOX"]
        },
        "position": {
          "$ref": "#/definitions/coordinate_string",
          "description": "線源の位置（x y z形式）、typeがPOINTの場合のみ必須"
        },
        "inventory": {
          "type": "array",
          "description": "核種と放射能の組の配列",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "nuclide": {
                "type": "string",
                "description": "核種名",
                "pattern": "^[A-Za-z0-9-]+$"
              },
              "radioactivity": {
                "$ref": "#/definitions/radioactivity_value",
                "description": "放射能（単位Bq）"
              }
            },
            "required": ["nuclide", "radioactivity"],
            "additionalProperties": false
          }
        },
        "geometry": {
          "type": "object",
          "description": "線源形状パラメータ（typeがPOINT以外の場合に必須）",
          "oneOf": [
            {
              "title": "BOX線源形状",
              "properties": {
                "vertex": {
                  "type": "string",
                  "description": "頂点座標（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_1": {
                  "type": "string",
                  "description": "エッジ1ベクトル（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_2": {
                  "type": "string",
                  "description": "エッジ2ベクトル（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_3": {
                  "type": "string",
                  "description": "エッジ3ベクトル（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                }
              },
              "required": ["vertex", "edge_1", "edge_2", "edge_3"],
              "additionalProperties": false
            },
            {
              "title": "RPP線源形状",
              "properties": {
                "min": {
                  "type": "string",
                  "description": "最小座標（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "max": {
                  "type": "string",
                  "description": "最大座標（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                }
              },
              "required": ["min", "max"],
              "additionalProperties": false
            },
            {
              "title": "SPH線源形状",
              "properties": {
                "center": {
                  "type": "string",
                  "description": "中心座標（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "radius": {
                  "type": "number",
                  "description": "半径",
                  "minimum": 0.001
                }
              },
              "required": ["center", "radius"],
              "additionalProperties": false
            },
            {
              "title": "RCC線源形状",
              "properties": {
                "bottom_center": {
                  "type": "string",
                  "description": "底面中心座標（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "height_vector": {
                  "type": "string",
                  "description": "高さベクトル（x y z形式）",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "radius": {
                  "type": "number",
                  "description": "半径",
                  "minimum": 0.001
                }
              },
              "required": ["bottom_center", "height_vector", "radius"],
              "additionalProperties": false
            }
          ],
          "transform": {
            "type": "string",
            "description": "適用する変換名"
          }  
        },
        "division": {
          "type": "object",
          "description": "線源の領域分割パラメータ（typeがPOINT以外の場合に必須）",
          "oneOf": [
            {
              "title": "BOX線源分割",
              "properties": {
                "edge_1": {
                  "$ref": "#/definitions/division_axis"
                },
                "edge_2": {
                  "$ref": "#/definitions/division_axis"
                },
                "edge_3": {
                  "$ref": "#/definitions/division_axis"
                }
              },
              "required": ["edge_1", "edge_2", "edge_3"],
              "additionalProperties": false
            },
            {
              "title": "RPP線源分割",
              "properties": {
                "edge_1": {
                  "$ref": "#/definitions/division_axis"
                },
                "edge_2": {
                  "$ref": "#/definitions/division_axis"
                },
                "edge_3": {
                  "$ref": "#/definitions/division_axis"
                }
              },
              "required": ["edge_1", "edge_2", "edge_3"],
              "additionalProperties": false
            },
            {
              "title": "SPH線源分割",
              "properties": {
                "r": {
                  "$ref": "#/definitions/division_axis"
                },
                "theta": {
                  "$ref": "#/definitions/division_axis"
                },
                "phi": {
                  "$ref": "#/definitions/division_axis"
                }
              },
              "required": ["r", "theta", "phi"],
              "additionalProperties": false
            },
            {
              "title": "RCC線源分割",
              "properties": {
                "r": {
                  "$ref": "#/definitions/division_axis"
                },
                "phi": {
                  "$ref": "#/definitions/division_axis"
                },
                "z": {
                  "$ref": "#/definitions/division_axis"
                }
              },
              "required": ["r", "phi", "z"],
              "additionalProperties": false
            }
          ]
        },
        "cutoff_rate": {
          "$ref": "#/definitions/cutoff_rate",
          "description": "放出率カットオフ",
          "default": 0.0001
        }
        },
        "required": ["name", "type", "inventory"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_updateSource",
      "description": "既存線源のパラメータを更新します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "更新する線源の名前",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        },
        "position": {
          "type": "string",
          "description": "新しい線源の位置（x y z形式）",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "inventory": {
          "type": "array",
          "description": "新しい核種と放射能の組の配列",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "nuclide": {
                "type": "string",
                "description": "核種名",
                "pattern": "^[A-Za-z0-9-]+$"
              },
              "radioactivity": {
                "type": "number",
                "description": "放射能（単位Bq）",
                "minimum": 0.001,
                "maximum": 1e15
              }
            },
            "required": ["nuclide", "radioactivity"],
            "additionalProperties": false
          }
        },
        "geometry": {
          "type": "object",
          "description": "新しい線源形状パラメータ",
          "oneOf": [
            {
              "title": "BOX線源形状",
              "properties": {
                "vertex": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_1": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_2": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "edge_3": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                }
              },
              "required": ["vertex", "edge_1", "edge_2", "edge_3"]
            },
            {
              "title": "RPP線源形状",
              "properties": {
                "min": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "max": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                }
              },
              "required": ["min", "max"]
            },
            {
              "title": "SPH線源形状",
              "properties": {
                "center": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "radius": {
                  "type": "number",
                  "minimum": 0.001
                }
              },
              "required": ["center", "radius"]
            },
            {
              "title": "RCC線源形状",
              "properties": {
                "bottom_center": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "height_vector": {
                  "type": "string",
                  "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
                },
                "radius": {
                  "type": "number",
                  "minimum": 0.001
                }
              },
              "required": ["bottom_center", "height_vector", "radius"]
            }
          ],
          "transform": {
            "type": "string",
            "description": "適用する変換名"
          }
        },
        "division": {
          "type": "object",
          "description": "新しい線源の領域分割パラメータ",
          "oneOf": [
            {
              "title": "BOX線源分割",
              "properties": {
                "edge_1": { "$ref": "#/definitions/division_axis" },
                "edge_2": { "$ref": "#/definitions/division_axis" },
                "edge_3": { "$ref": "#/definitions/division_axis" }
              },
              "required": ["edge_1", "edge_2", "edge_3"]
            },
            {
              "title": "RPP線源分割",
              "properties": {
                "edge_1": { "$ref": "#/definitions/division_axis" },
                "edge_2": { "$ref": "#/definitions/division_axis" },
                "edge_3": { "$ref": "#/definitions/division_axis" }
              },
              "required": ["edge_1", "edge_2", "edge_3"]
            },
            {
              "title": "SPH線源分割",
              "properties": {
                "r": { "$ref": "#/definitions/division_axis" },
                "theta": { "$ref": "#/definitions/division_axis" },
                "phi": { "$ref": "#/definitions/division_axis" }
              },
              "required": ["r", "theta", "phi"]
            },
            {
              "title": "RCC線源分割",
              "properties": {
                "r": { "$ref": "#/definitions/division_axis" },
                "phi": { "$ref": "#/definitions/division_axis" },
                "z": { "$ref": "#/definitions/division_axis" }
              },
              "required": ["r", "phi", "z"]
            }
          ]
        },
        "cutoff_rate": {
          "type": "number",
          "description": "新しい放出率カットオフ",
          "minimum": 0.0001,
          "maximum": 1.0
        }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_deleteSource",
      "description": "線源を削除します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "削除する線源の名前",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput_proposeDetector",
      "description": "新しい検出器を提案します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "$ref": "#/definitions/object_name",
          "description": "検出器の名前（一意である必要があります）"
        },
        "origin": {
          "$ref": "#/definitions/coordinate_string",
          "description": "検出器の基準位置（x y z形式）"
        },
        "grid": {
          "type": "array",
          "description": "エッジベクトルと分割数の組の配列（配列の数が検出器の次元を表す）",
          "items": {
            "type": "object",
            "properties": {
              "edge": {
                "$ref": "#/definitions/coordinate_string",
                "description": "エッジベクトル（x y z形式）"
              },
              "number": {
                "$ref": "#/definitions/grid_division",
                "description": "分割数"
              }
            },
            "required": ["edge", "number"]
          }
        },
        "transform": {
          "type": "string",
          "description": "適用する変換名"
        },
        "show_path_trace": {
          "type": "boolean",
          "description": "透過線の経路トレースをサマリーに出力するか",
          "default": false
        }
        },
        "required": ["name", "origin"],
        "additionalProperties": false
      },
      "validation": {
        "name_uniqueness": "検出器名の重複チェック",
        "grid_dimension": "グリッド次元の妥当性チェック",
        "coordinate_validity": "座標とベクトルの妥当性確認"
      }
    },
    {
      "name": "pokerinput_updateDetector",
      "description": "既存検出器のパラメータを更新します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "更新する検出器の名前",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        },
        "origin": {
          "type": "string",
          "description": "新しい検出器の基準位置（x y z形式）",
          "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
        },
        "grid": {
          "type": "array",
          "description": "新しいエッジベクトルと分割数の組の配列（配列の数が検出器の次元を表す）",
          "items": {
            "type": "object",
            "properties": {
              "edge": {
                "type": "string",
                "description": "エッジベクトル（x y z形式）",
                "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
              },
              "number": {
                "type": "integer",
                "description": "分割数",
                "minimum": 1
              }
            },
            "required": ["edge", "number"]
          }
        },
        "transform": {
          "type": "string",
          "description": "適用する変換名"
        },
        "show_path_trace": {
          "type": "boolean",
          "description": "透過線の経路トレースをサマリーに出力するか"
        }
        },
        "required": ["name"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "検出器の存在確認",
        "parameter_validity": "更新パラメータの妥当性チェック",
        "grid_consistency": "グリッド設定の一貫性確認"
      }
    },
    {
      "name": "pokerinput_deleteDetector",
      "description": "検出器を削除します",
      "parameters": {
        "type": "object",
        "properties": {
        "name": {
          "type": "string",
          "description": "削除する検出器の名前",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "maxLength": 50
        }
        },
        "required": ["name"],
        "additionalProperties": false
      },
      "validation": {
        "existence_check": "検出器の存在確認",
        "safety_validation": "削除の安全性確認"
      }
    },
    {
      "name": "pokerinput_applyChanges",
      "description": "全ての保留中の変更を実際のYAMLファイルに適用します。自動的にバックアップが作成されます。",
      "parameters": {
        "type": "object",
        "properties": {
        "force": {
          "type": "boolean",
          "description": "強制適用フラグ（警告を無視）",
          "default": false
        },
        "backup_comment": {
          "$ref": "#/definitions/comment_length",
          "description": "バックアップのコメント"
        }
        },
        "additionalProperties": false
      }
    }
  ],
  "definitions": {
    "coordinate_string": {
      "type": "string",
      "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$",
      "description": "x y z形式の座標文字列"
    },
    "positive_radius": {
      "type": "number",
      "minimum": 0.001,
      "maximum": 10000,
      "description": "正の半径値 (cm)"
    },
    "density_value": {
      "type": "number",
      "minimum": 0.001,
      "maximum": 30.0,
      "description": "密度値 (g/cm³)"
    },
    "radioactivity_value": {
      "type": "number",
      "minimum": 0.001,
      "maximum": 1e15,
      "description": "放射能値 (Bq)"
    },
    "object_name": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "maxLength": 50,
      "description": "オブジェクト名"
    },
    "rotation_angle": {
      "type": "number",
      "minimum": -360,
      "maximum": 360,
      "description": "回転角度（度）"
    },
    "cutoff_rate": {
      "type": "number",
      "minimum": 0.0001,
      "maximum": 1.0,
      "description": "カットオフ率"
    },
    "buildup_index": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100,
      "description": "ビルドアップ係数インデックス"
    },
    "grid_division": {
      "type": "integer",
      "minimum": 1,
      "maximum": 1000,
      "description": "グリッド分割数"
    },
    "comment_length": {
      "type": "string",
      "maxLength": 200,
      "description": "コメント文字列"
    },
    "division_axis": {
      "type": "object",
      "description": "分割軸の設定",
      "properties": {
        "type": {
          "type": "string",
          "description": "分割タイプ",
          "enum": ["UNIFORM", "GAUSS_FIRST", "GAUSS_LAST", "GAUSS_BOTH", "GAUSS_CENTER"],
          "default": "UNIFORM"
        },
        "number": {
          "$ref": "#/definitions/grid_division",
          "description": "分割数",
          "maximum": 100
        },
        "min": {
          "type": "number",
          "description": "分割開始位置（0.0～1.0）",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.0
        },
        "max": {
          "type": "number",
          "description": "分割終了位置（0.0～1.0）",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 1.0
        }
      },
      "required": ["type", "number"],
      "additionalProperties": false
    }
  },
  "validation_enhanced": {
    "coordinate_patterns": {
      "xyz_format": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$",
      "range_limits": {
        "coordinate_max": 1000000,
        "coordinate_min": -1000000
      }
    },
    "physics_constraints": {
      "radius_min": 0.001,
      "density_max": 30.0,
      "radioactivity_max": 1e15
    },
    "name_constraints": {
      "max_length": 50,
      "allowed_chars": "^[a-zA-Z0-9_-]+$"
    },
    "material_constraints": {
      "supported_materials": ["Carbon", "Concrete", "Iron", "Lead", "Aluminum", "Copper", "Tungsten", "Air", "Water", "PyrexGlass", "AcrylicResin", "Polyethylene", "Soil"],
      "density_ranges": {
        "Air": {"min": 0.001, "max": 0.01},
        "Water": {"min": 0.9, "max": 1.1},
        "Concrete": {"min": 2.0, "max": 3.0},
        "Iron": {"min": 7.0, "max": 8.0},
        "Lead": {"min": 10.0, "max": 12.0},
        "Aluminum": {"min": 2.5, "max": 3.0},
        "Copper": {"min": 8.5, "max": 9.0}
      }
    },
    "buildup_factor_constraints": {
      "supported_corrections": ["use_slant_correction", "use_finite_medium_correction"],
      "correction_combinations": {
        "both_enabled": "高精度計算モード",
        "slant_only": "斜め入射補正のみ",
        "finite_only": "有限媒体補正のみ", 
        "both_disabled": "基本計算モード"
      },
      "calculation_order": {
        "description": "材料別計算順序の管理",
        "index_range": {"min": 0, "max": 100}
      }
    },
    "detector_constraints": {
      "grid_dimensions": {
        "min_dimensions": 0,
        "max_dimensions": 3,
        "min_divisions": 1,
        "max_divisions": 1000
      },
      "supported_types": ["POINT", "GRID_1D", "GRID_2D", "GRID_3D"],
      "coordinate_validation": {
        "origin_required": true,
        "edge_vector_format": "x y z space-separated"
      }
    },
    "body_type_constraints": {
      "SPH": {
        "required_parameters": ["name", "type", "center", "radius"],
        "parameter_constraints": {
          "center": {
            "type": "string",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$",
            "description": "中心座標 (x y z形式)"
          },
          "radius": {
            "type": "number",
            "minimum": 0.001,
            "maximum": 10000,
            "description": "半径 (cm)"
          }
        },
        "physical_constraints": {
          "volume_max": 4.19e12,
          "practical_radius_max": 5000
        }
      },
      "RCC": {
        "required_parameters": ["name", "type", "bottom_center", "height_vector", "radius"],
        "parameter_constraints": {
          "bottom_center": {
            "type": "string",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "height_vector": {
            "type": "string",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$",
            "validation_rules": ["non_zero_magnitude"]
          },
          "radius": {
            "type": "number",
            "minimum": 0.001,
            "maximum": 10000
          }
        }
      },
      "RPP": {
        "required_parameters": ["name", "type", "min", "max"],
        "parameter_constraints": {
          "min": {
            "type": "string",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "max": {
            "type": "string",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          }
        },
        "logical_constraints": {
          "min_less_than_max": "All min coordinates must be less than max coordinates",
          "minimum_thickness": 0.001
        }
      },
      "BOX": {
        "required_parameters": ["name", "type", "vertex", "edge_1", "edge_2", "edge_3"],
        "parameter_constraints": {
          "vertex": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "edge_1": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "edge_2": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "edge_3": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"}
        },
        "logical_constraints": {
          "linear_independence": "Edge vectors must be linearly independent",
          "non_zero_length": "All edge vectors must have non-zero length"
        }
      },
      "TOR": {
        "required_parameters": ["name", "type", "center", "normal", "major_radius", "minor_radius_horizontal", "minor_radius_vertical"],
        "parameter_constraints": {
          "center": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "normal": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "major_radius": {"type": "number", "minimum": 0.001, "maximum": 10000},
          "minor_radius_horizontal": {"type": "number", "minimum": 0.001, "maximum": 10000},
          "minor_radius_vertical": {"type": "number", "minimum": 0.001, "maximum": 10000}
        },
        "logical_constraints": {
          "major_greater_than_minor": "major_radius must be greater than minor radii"
        }
      },
      "ELL": {
        "required_parameters": ["name", "type", "center", "radius_vector_1", "radius_vector_2", "radius_vector_3"],
        "parameter_constraints": {
          "center": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "radius_vector_1": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "radius_vector_2": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "radius_vector_3": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"}
        }
      },
      "TRC": {
        "required_parameters": ["name", "type", "bottom_center", "height_vector", "bottom_radius", "top_radius"],
        "parameter_constraints": {
          "bottom_center": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "height_vector": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "bottom_radius": {"type": "number", "minimum": 0.001, "maximum": 10000},
          "top_radius": {"type": "number", "minimum": 0.001, "maximum": 10000}
        }
      },
      "REC": {
        "required_parameters": ["name", "type", "bottom_center", "height_vector", "radius_vector_1", "radius_vector_2"],
        "parameter_constraints": {
          "bottom_center": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "height_vector": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "radius_vector_1": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "radius_vector_2": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"}
        }
      },
      "WED": {
        "required_parameters": ["name", "type", "vertex", "width_vector", "height_vector", "depth_vector"],
        "parameter_constraints": {
          "vertex": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "width_vector": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "height_vector": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"},
          "depth_vector": {"type": "string", "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"}
        }
      },
      "CMB": {
        "required_parameters": ["name", "type", "expression"],
        "parameter_constraints": {
          "expression": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9_+\\-*() ]+$",
            "description": "Boolean combination expression using body names"
          }
        }
      }
    },
    "division_constraints": {
      "division_types": ["UNIFORM", "GAUSS_FIRST", "GAUSS_LAST", "GAUSS_BOTH", "GAUSS_CENTER"],
      "number_limits": {
        "min": 1,
        "max": 100
      },
      "range_validation": "min must be less than max",
      "default_values": {
        "BOX_defaults": {"type": "UNIFORM", "number": 3},
        "RPP_defaults": {"type": "UNIFORM", "number": 3},
        "SPH_defaults": {"r": {"type": "GAUSS_LAST", "number": 9}, "theta": {"type": "UNIFORM", "number": 18}, "phi": {"type": "UNIFORM", "number": 18}},
        "RCC_defaults": {"r": {"type": "GAUSS_LAST", "number": 9}, "phi": {"type": "UNIFORM", "number": 18}, "z": {"type": "UNIFORM", "number": 18}}
      }
    }
  },
  "error_handling_detailed": {
    "json_rpc_compliant": true,
    "custom_error_codes": {
      "-32001": "Body not found",
      "-32002": "Zone not found", 
      "-32003": "Duplicate name",
      "-32004": "Invalid body type",
      "-32005": "Dependency exists",
      "-32006": "File access error",
      "-32007": "Validation error",
      "-32008": "Backup error",
      "-32009": "Physics constraint violation",
      "-32010": "Coordinate format error",
      "-32011": "Parameter type mismatch",
      "-32012": "Required parameter missing",
      "-32013": "Invalid parameter combination",
      "-32014": "Geometry validation error",
      "-32015": "Source type mismatch",
      "-32019": "Material validation error",
      "-32020": "Density out of range",
      "-32021": "Zone dependency exists",
      "-32022": "Protected zone deletion",
      "-32023": "Buildup factor not found",
      "-32024": "Invalid correction combination",
      "-32025": "Index out of range",
      "-32026": "Calculation order conflict",
      "-32027": "Detector not found",
      "-32028": "Grid dimension mismatch",
      "-32029": "Transform not found",
      "-32030": "Invalid detector configuration"
    },
    "error_context": {
      "include_parameter_name": true,
      "include_expected_format": true,
      "include_correction_hint": true,
      "include_valid_values": true,
      "include_material_suggestions": true,
      "include_dependency_info": true,
      "include_buildup_examples": true
    },
    "standard_error_codes": {
      "-32600": "Invalid Request",
      "-32601": "Method not found",
      "-32602": "Invalid params",
      "-32603": "Internal error",
      "-32000": "Server error"
    }
  },
  "conditional_parameter_rules": {
    "source_types_enhanced": {
      "POINT": {
        "required": ["name", "type", "position", "inventory"],
        "optional": ["cutoff_rate"],
        "forbidden": ["geometry", "division", "transform"],
        "validation": "position must be valid xyz coordinates"
      },
      "SPH": {
        "required": ["name", "type", "geometry", "division", "inventory"],
        "optional": ["cutoff_rate"],
        "forbidden": ["position"],
        "geometry_structure": {
          "type": "object",
          "required_properties": ["center", "radius"],
          "optional": ["transform"]
        },
        "division_structure": {
          "type": "object",
          "required_axes": ["r", "theta", "phi"],
          "coordinate_system": "spherical"
        }
      },
      "RCC": {
        "required": ["name", "type", "geometry", "division", "inventory"],
        "optional": ["cutoff_rate"],
        "forbidden": ["position"],
        "geometry_structure": {
          "type": "object",
          "required_properties": ["bottom_center", "height_vector", "radius"],
          "optional": ["transform"]
        },
        "division_structure": {
          "type": "object",
          "required_axes": ["r", "phi", "z"],
          "coordinate_system": "cylindrical"
        }
      },
      "RPP": {
        "required": ["name", "type", "geometry", "division", "inventory"],
        "optional": ["cutoff_rate"],
        "forbidden": ["position"],
        "geometry_structure": {
          "type": "object",
          "required_properties": ["min", "max"],
          "optional": ["transform"]
        },
        "division_structure": {
          "type": "object",
          "required_axes": ["edge_1", "edge_2", "edge_3"],
          "coordinate_system": "cartesian"
        }
      },
      "BOX": {
        "required": ["name", "type", "geometry", "division", "inventory"],
        "optional": ["cutoff_rate"],
        "forbidden": ["position"],
        "geometry_structure": {
          "type": "object",
          "required_properties": ["vertex", "edge_1", "edge_2", "edge_3"],
          "optional": ["transform"]
        },
        "division_structure": {
          "type": "object",
          "required_axes": ["edge_1", "edge_2", "edge_3"],
          "coordinate_system": "cartesian"
        }
      }
    }
  },
  "data_files": {
    "input": "tasks/pokerinputs.yaml",
    "pending_changes": "tasks/pending_changes.json",
    "backup_directory": "backups/"
  },
  "backup_features": {
    "automatic_backup": true,
    "timestamp_format": "ISO_8601",
    "retention_policy": "最新10個のバックアップを保持",
    "cleanup_automatic": true
  },
  "production_features": {
    "real_yaml_updates": true,
    "transaction_safety": true,
    "graceful_shutdown": true,
    "memory_management": "optimized",
    "performance": "production_ready"
  }
}