# âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° - Poker MCP

**å¯¾è±¡**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆå•é¡Œè§£æ±ºæ™‚ï¼‰  
<<<<<<< HEAD
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1.0 MCP Edition  
**æœ€çµ‚æ›´æ–°**: 2025å¹´9æœˆ8æ—¥  
**ä½¿ç”¨æ–¹æ³•**: Claude Desktop + MCPé€šä¿¡
=======
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0 MCP Edition  
**æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ24æ—¥  
**ä½¿ç”¨æ–¹æ³•**: Claude Desktop + MCPé€šä¿¡ (28ãƒ¡ã‚½ãƒƒãƒ‰å¯¾å¿œ)
>>>>>>> afterKOKURA

---

## ğŸ¯ ã“ã®ã‚¬ã‚¤ãƒ‰ã®ä½¿ã„æ–¹

### ğŸ†˜ **ç·Šæ€¥æ™‚å¯¾å¿œè¨­è¨ˆ**
- **ç—‡çŠ¶åˆ¥ç´¢å¼•**: èµ·ã“ã£ãŸç¾è±¡ã‹ã‚‰ã™ãã«è§£æ±ºæ³•ã‚’è¦‹ã¤ã‘ã‚‹
- **ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§**: MCPå›ºæœ‰ã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¨å¯¾å‡¦æ³•
- **æ®µéšçš„è¨ºæ–­**: ç°¡å˜ãªãƒã‚§ãƒƒã‚¯ã‹ã‚‰é«˜åº¦ãªè¨ºæ–­ã¾ã§
- **å³åº§å®Ÿè¡Œ**: Claude Desktopã§ç›´æ¥å®Ÿè¡Œå¯èƒ½ãªæŒ‡ç¤º

### âš¡ **ä½¿ç”¨æ‰‹é †**
1. **ç—‡çŠ¶ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‹ã‚‰è©²å½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç‰¹å®š**
2. **è¨˜è¼‰ã•ã‚ŒãŸæŒ‡ç¤ºã‚’Claude Desktopã§å®Ÿè¡Œ**
3. **è§£æ±ºã—ãªã„å ´åˆã¯æ¬¡ã®æ®µéšã¸é€²ã‚€**
4. **è§£æ±ºå¾Œã¯äºˆé˜²ç­–ã‚’å®Ÿæ–½**

---

## ğŸš¨ ç¬¬1ç« : MCPå›ºæœ‰ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§

### ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¯¾å¿œè¡¨

| ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ | æ„å‘³ | å¯¾å‡¦æ³• |
|------------|------|--------|
| -32064 | ç«‹ä½“ãŒæ—¢ã«å­˜åœ¨ | poker_updateBodyã‚’ä½¿ç”¨ |
| -32065 | ç«‹ä½“ãŒå­˜åœ¨ã—ãªã„ | poker_proposeBodyã‚’ä½¿ç”¨ |
| -32060 | ã‚¾ãƒ¼ãƒ³ãŒæ—¢ã«å­˜åœ¨ | poker_updateZoneã‚’ä½¿ç”¨ |
| -32061 | ã‚¾ãƒ¼ãƒ³ãŒå­˜åœ¨ã—ãªã„ | poker_proposeZoneã‚’ä½¿ç”¨ |
| -32070 | ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•°ãŒæ—¢ã«å­˜åœ¨ | poker_updateBuildupFactorã‚’ä½¿ç”¨ |
| -32071 | ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•°ãŒå­˜åœ¨ã—ãªã„ | poker_proposeBuildupFactorã‚’ä½¿ç”¨ |
| -32074 | å¤‰æ›ãŒæ—¢ã«å­˜åœ¨ | poker_updateTransformã‚’ä½¿ç”¨ |
| -32075 | å¤‰æ›ãŒå­˜åœ¨ã—ãªã„ | poker_proposeTransformã‚’ä½¿ç”¨ |
| -32078 | ç·šæºãŒæ—¢ã«å­˜åœ¨ | poker_updateSourceã‚’ä½¿ç”¨ |
| -32079 | ç·šæºãŒå­˜åœ¨ã—ãªã„ | poker_proposeSourceã‚’ä½¿ç”¨ |
| -32031 | CMBå‚ç…§ç«‹ä½“ãŒæœªå®šç¾© | å‚ç…§ã™ã‚‹ç«‹ä½“ã‚’å…ˆã«å®šç¾© |
| -32600 | ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å½¢å¼ç¢ºèª |
| -32601 | ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„ | ãƒ¡ã‚½ãƒƒãƒ‰åç¢ºèªï¼ˆ28ãƒ¡ã‚½ãƒƒãƒ‰ãƒªã‚¹ãƒˆå‚ç…§ï¼‰ |

### ã‚¨ãƒ©ãƒ¼å¯¾å‡¦ã®åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³

```
Claude Desktop æŒ‡ç¤º:
ã€Œã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ -32064 ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚é©åˆ‡ãªå¯¾å‡¦ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ã‚¨ãƒ©ãƒ¼è¨ºæ–­:
1. ã‚¨ãƒ©ãƒ¼ã®æ„å‘³: ç«‹ä½“ãŒæ—¢ã«å­˜åœ¨
2. ç™ºç”ŸåŸå› : poker_proposeBodyã§æ—¢å­˜åã‚’ä½¿ç”¨
3. å¯¾å‡¦æ³•: 
   - æ–°è¦ä½œæˆã®å ´åˆ: åˆ¥ã®åå‰ã‚’ä½¿ç”¨
   - æ›´æ–°ã®å ´åˆ: poker_updateBodyã‚’ä½¿ç”¨
   
å®Ÿè¡Œ:
poker_updateBody ã§æ—¢å­˜ç«‹ä½“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚ã€
```

---

## ğŸ”´ ç¬¬2ç« : ç·Šæ€¥åº¦åˆ¥å•é¡Œåˆ†é¡

### ğŸ”´ **ç·Šæ€¥åº¦: é«˜ï¼ˆå³åº§å¯¾å¿œå¿…è¦ï¼‰**

#### **å•é¡ŒA1: MCPã‚µãƒ¼ãƒãƒ¼ãŒèªè­˜ã•ã‚Œãªã„**
```
ç—‡çŠ¶:
- Claude Desktopã§poker_ã‹ã‚‰å§‹ã¾ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ç”¨ã§ããªã„
- ã€Œãƒ„ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼
- MCPæ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

å³åº§å¯¾å¿œ:
ã€ŒMCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã®ç·Šæ€¥è¨ºæ–­ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª:
   ãƒ‘ã‚¹: C:\Users\yoshi\AppData\Roaming\Claude\claude_desktop_config.json
   
2. è¨­å®šå†…å®¹ç¢ºèª:
   {
     "mcpServers": {
       "poker-mcp": {
         "command": "node",
         "args": ["C:\\Users\\yoshi\\Desktop\\poker_mcp\\src\\mcp_server_stdio_v4.js"],
         "env": {}
       }
     }
   }

3. ã‚µãƒ¼ãƒãƒ¼ç›´æ¥èµ·å‹•ãƒ†ã‚¹ãƒˆ:
   ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§:
   cd C:\Users\yoshi\Desktop\poker_mcp
   node src\mcp_server_stdio_v4.js
   
4. Claude Desktopå†èµ·å‹•:
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Œå…¨çµ‚äº†
   - å†èµ·å‹•å¾Œã«poker_getUnitã§ãƒ†ã‚¹ãƒˆ

å„ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã‚’å ±å‘Šã—ã¦ãã ã•ã„ã€‚ã€
```

#### **å•é¡ŒA2: poker_cuiå®Ÿè¡Œã‚¨ãƒ©ãƒ¼**
```
ç—‡çŠ¶:
- poker_executeCalculation ã§ã‚¨ãƒ©ãƒ¼
- ã€Œpoker_cui not foundã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- è¨ˆç®—ãŒé–‹å§‹ã•ã‚Œãªã„

å³åº§å¯¾å¿œ:
ã€Œpoker_cuiå®Ÿè¡Œå•é¡Œã®è¨ºæ–­ã¨ä¿®å¾©:

1. poker_cuiã®å­˜åœ¨ç¢ºèª:
   - å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ç¢ºèª
   - å®Ÿè¡Œæ¨©é™ç¢ºèª

2. ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ç›´æ¥ãƒ†ã‚¹ãƒˆ:
   poker_cui -t -s tasks/poker.yaml
   
3. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æ:
   - 'not found': ãƒ‘ã‚¹è¨­å®šå•é¡Œ
   - 'permission denied': æ¨©é™å•é¡Œ
   - 'invalid format': YAMLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå•é¡Œ

4. ç’°å¢ƒå¤‰æ•°è¨­å®š:
   PATHç’°å¢ƒå¤‰æ•°ã«poker_cuiãƒ‘ã‚¹è¿½åŠ 

ä¿®å¾©ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ã€
```

#### **å•é¡ŒA3: YAMLãƒ•ã‚¡ã‚¤ãƒ«ç ´æ**
```
ç—‡çŠ¶:
- ã€ŒYAML parse errorã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- poker_applyChangeså¤±æ•—
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã‚ãªã„

ç·Šæ€¥å¾©æ—§:
ã€ŒYAMLãƒ•ã‚¡ã‚¤ãƒ«ç·Šæ€¥å¾©æ—§ã‚’å®Ÿè¡Œ:

1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª:
   tasks/backups/ ãƒ•ã‚©ãƒ«ãƒ€ã®æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç‰¹å®š

2. pending_changes.jsonç¢ºèª:
   ä¿ç•™ä¸­ã®å¤‰æ›´å†…å®¹ç¢ºèª

3. æ‰‹å‹•å¾©æ—§:
   - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã‚³ãƒ”ãƒ¼
   - pending_changesé©ç”¨
   
4. ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆä¿®æ­£:
   - ã‚¹ãƒšãƒ¼ã‚¹2å€‹ã§çµ±ä¸€
   - ã‚¿ãƒ–æ–‡å­—ã‚’é™¤å»

5. äºˆç´„èªãƒã‚§ãƒƒã‚¯:
   - ATMOSPHEREä½¿ç”¨ç®‡æ‰€ç¢ºèª
   - å¾ªç’°å‚ç…§ï¼ˆCMBï¼‰ç¢ºèª

å¾©æ—§ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚ã€
```

---

### ğŸŸ¡ **ç·Šæ€¥åº¦: ä¸­ï¼ˆæ—©æœŸå¯¾å¿œæ¨å¥¨ï¼‰**

#### **å•é¡ŒB1: ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼**
```
ç—‡çŠ¶:
- å¤§è¦æ¨¡è¨ˆç®—ã§ã€ŒOut of memoryã€
- è¨ˆç®—é€”ä¸­ã§åœæ­¢
- ã‚·ã‚¹ãƒ†ãƒ ãŒé‡ããªã‚‹

å¯¾å‡¦æ³•:
ã€Œãƒ¡ãƒ¢ãƒªå•é¡Œã®æ®µéšçš„è§£æ±º:

1. å³åº§ã®å¯¾ç­–:
   - cutoff_rate ã‚’ 0.0001 â†’ 0.001 ã«å¢—åŠ 
   - æ¤œå‡ºå™¨æ•°ã‚’å‰Šæ¸›ï¼ˆæ ¼å­ã‚’ç²—ãï¼‰
   
2. åˆ†å‰²è¨ˆç®—å®Ÿè£…:
   # ç·šæºã‚’åˆ†å‰²
   poker_resetYaml(level="minimal")
   for source_group in source_groups:
       poker_proposeSource(source_group)
       poker_executeCalculation()
       çµæœä¿å­˜
   
3. æœ€é©åŒ–è¨­å®š:
   - show_path_trace: false ã«è¨­å®š
   - ä¸è¦ãªä¸­é–“ãƒ‡ãƒ¼ã‚¿å‰Šé™¤

å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚ã€
```

#### **å•é¡ŒB2: è¨ˆç®—çµæœã®ç•°å¸¸å€¤**
```
ç—‡çŠ¶:
- è² ã®ç·šé‡å€¤
- æ¥µç«¯ã«å¤§ãã„/å°ã•ã„å€¤
- è·é›¢å¢—åŠ ã§ç·šé‡å¢—åŠ 

è¨ºæ–­ã¨ä¿®æ­£:
ã€Œç‰©ç†çš„ç•°å¸¸å€¤ã®ç³»çµ±çš„è¨ºæ–­:

1. è² ã®ç·šé‡å€¤:
   - å½¢çŠ¶å®šç¾©ã®é‡ãªã‚Šãƒã‚§ãƒƒã‚¯
   - CMBæ¼”ç®—å¼ã®ç¢ºèª
   - poker_updateBody ã§ä¿®æ­£

2. æ¥µç«¯ãªå€¤ï¼ˆ>1e10 or <1e-20ï¼‰:
   - å˜ä½ç³»ç¢ºèª: poker_getUnit
   - æ”¾å°„èƒ½å˜ä½ç¢ºèªï¼ˆBqå˜ä½ï¼‰
   - poker_validateUnitIntegrityå®Ÿè¡Œ

3. è·é›¢ä¾å­˜ç•°å¸¸:
   - ç·šæºä½ç½®ç¢ºèª
   - æ¤œå‡ºå™¨é…ç½®ç¢ºèª
   - åº§æ¨™ç³»ã®ä¸€è²«æ€§ç¢ºèª

4. ç‰©ç†çš„å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯:
   - 1/rÂ²å‰‡ã®ç¢ºèª
   - é®è”½åŠ¹æœã®ç¢ºèª
   - ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•°ã®å¦¥å½“æ€§

ä¿®æ­£ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚ã€
```

#### **å•é¡ŒB3: 28ãƒ¡ã‚½ãƒƒãƒ‰ã®ä½¿ã„åˆ†ã‘è¿·ã„**
```
ç—‡çŠ¶:
- proposeã¨updateã®ä½¿ã„åˆ†ã‘ãŒä¸æ˜
- ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¹ãã‹åˆ†ã‹ã‚‰ãªã„
- ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãŒé »ç™º

åˆ¤æ–­åŸºæº–:
ã€Œ28ãƒ¡ã‚½ãƒƒãƒ‰é©åˆ‡ä½¿ç”¨ã‚¬ã‚¤ãƒ‰:

ã€propose vs update vs deleteã€‘
æ–°è¦ä½œæˆ â†’ propose
æ—¢å­˜ä¿®æ­£ â†’ update  
å‰Šé™¤ â†’ delete

ã€ä½¿ç”¨é †åºã®åŸå‰‡ã€‘
1. Bodyå®šç¾© â†’ Zoneè¨­å®š â†’ Sourceé…ç½® â†’ Detectorè¨­ç½®
2. Unitè¨­å®šã¯æœ€åˆã«å®Ÿè¡Œ
3. BuildupFactorã¯ææ–™ä½¿ç”¨å‰ã«è¨­å®š
4. applyChangesã§å¤‰æ›´ç¢ºå®š

ã€Unitæ“ä½œ5ãƒ¡ã‚½ãƒƒãƒ‰ã®é †åºã€‘
1. proposeUnit: åˆæœŸè¨­å®š
2. getUnit: ç¾çŠ¶ç¢ºèª
3. validateUnitIntegrity: æ•´åˆæ€§ç¢ºèª
4. analyzeUnitConversion: å¤‰æ›åˆ†æ
5. updateUnit: å¿…è¦æ™‚ã®ã¿å¤‰æ›´

ã€ã‚¨ãƒ©ãƒ¼æ™‚ã®åˆ‡ã‚Šæ›¿ãˆã€‘
-32064 â†’ proposeã‹ã‚‰updateã¸
-32065 â†’ updateã‹ã‚‰proposeã¸

ã“ã®åŸå‰‡ã«å¾“ã£ã¦æ“ä½œã—ã¦ãã ã•ã„ã€‚ã€
```

---

### ğŸŸ¢ **ç·Šæ€¥åº¦: ä½ï¼ˆè¨ˆç”»çš„å¯¾å¿œï¼‰**

#### **å•é¡ŒC1: è¨ˆç®—é€Ÿåº¦ã®æ”¹å–„**
```
ç—‡çŠ¶:
- è¨ˆç®—ã«æ™‚é–“ãŒã‹ã‹ã‚‹
- å¿œç­”ãŒé…ã„
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿ

æœ€é©åŒ–:
ã€Œè¨ˆç®—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–:

1. ã‚«ãƒƒãƒˆã‚ªãƒ•ãƒ¬ãƒ¼ãƒˆèª¿æ•´:
   æ¦‚ç•¥è¨ˆç®—: 0.01
   æ¨™æº–è¨ˆç®—: 0.001
   è©³ç´°è¨ˆç®—: 0.0001

2. æ¤œå‡ºå™¨æœ€é©åŒ–:
   - ç‚¹æ¤œå‡ºå™¨å„ªå…ˆä½¿ç”¨
   - æ ¼å­æ•°ã®é©åˆ‡åŒ–ï¼ˆ10Ã—10ç¨‹åº¦ï¼‰
   - show_path_traceç„¡åŠ¹åŒ–

3. æ®µéšçš„è©³ç´°åŒ–:
   ç²—ã„è¨ˆç®— â†’ ãƒ›ãƒƒãƒˆã‚¹ãƒãƒƒãƒˆç‰¹å®š â†’ è©³ç´°è¨ˆç®—

å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚ã€
```

---

## ğŸ”§ ç¬¬3ç« : ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æ´»ç”¨

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã¨ç¢ºèªæ–¹æ³•

```
Claude Desktop æŒ‡ç¤º:
ã€Œãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«è¨ºæ–­ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:

1. Claude Desktopãƒ­ã‚°:
   å ´æ‰€: C:\Users\yoshi\AppData\Roaming\Claude\logs\
   æœ€æ–°ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
   
2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°:
   å ´æ‰€: C:\Users\yoshi\AppData\Local\AnthropicClaude\app-[version]\
   
3. ãƒ­ã‚°å†…å®¹ã®ç¢ºèªãƒã‚¤ãƒ³ãƒˆ:
   - 'error'ã‚’å«ã‚€è¡Œ
   - 'poker'ã‚’å«ã‚€è¡Œ
   - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç¢ºèª
   
4. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è§£é‡ˆ:
   - 'ENOENT': ãƒ•ã‚¡ã‚¤ãƒ«æœªæ¤œå‡º
   - 'EACCES': ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚¨ãƒ©ãƒ¼
   - 'EINVAL': ç„¡åŠ¹ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
   - 'ETIMEDOUT': ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

æœ€æ–°50è¡Œã‚’ç¢ºèªã—ã¦å•é¡Œã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚ã€
```

### ãƒ­ã‚°ã‹ã‚‰ã®å•é¡Œç‰¹å®šä¾‹

```python
# ãƒ­ã‚°è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆ
import re
from pathlib import Path
from datetime import datetime

def analyze_logs():
    log_path = Path(r"C:\Users\yoshi\AppData\Roaming\Claude\logs")
    
    # æœ€æ–°ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
    latest_log = max(log_path.glob("*.log"), 
                    key=lambda p: p.stat().st_mtime)
    
    with open(latest_log, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    
    # ã‚¨ãƒ©ãƒ¼æŠ½å‡º
    errors = []
    for i, line in enumerate(lines):
        if 'error' in line.lower() or 'poker' in line.lower():
            errors.append({
                'line_no': i + 1,
                'content': line.strip(),
                'timestamp': extract_timestamp(line)
            })
    
    # ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
    patterns = {
        'MCPæ¥ç¶š': r'mcp.*connection',
        'ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œ': r'poker_\w+.*failed',
        'YAMLé–¢é€£': r'yaml.*error',
        'ãƒ¡ãƒ¢ãƒª': r'memory|heap'
    }
    
    categorized = {cat: [] for cat in patterns}
    for error in errors:
        for category, pattern in patterns.items():
            if re.search(pattern, error['content'], re.I):
                categorized[category].append(error)
    
    return categorized

def extract_timestamp(line):
    # ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æŠ½å‡ºï¼ˆä¾‹: 2025-01-15 10:30:45ï¼‰
    match = re.search(r'\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}:\d{2}', line)
    return match.group() if match else None
```

---

## ğŸ”¨ ç¬¬4ç« : YAMLãƒ•ã‚¡ã‚¤ãƒ«ãƒˆãƒ©ãƒ–ãƒ«

### 4.1 ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼

```
ç—‡çŠ¶ã¨å¯¾å‡¦:
ã€ŒYAMLã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼ä¿®æ­£:

ã€ç—‡çŠ¶ã€‘
- 'expected <block end>, but found <scalar>'
- 'bad indentation'

ã€åŸå› ã¨ä¿®æ­£ã€‘
1. ã‚¿ãƒ–æ–‡å­—æ··å…¥:
   æ¤œç´¢ç½®æ›: ã‚¿ãƒ– â†’ ã‚¹ãƒšãƒ¼ã‚¹2å€‹
   
2. ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆä¸æ•´åˆ:
   æ­£ã—ã„ä¾‹:
   bodies:
     - name: wall    # ã‚¹ãƒšãƒ¼ã‚¹2å€‹
       type: RPP     # ã‚¹ãƒšãƒ¼ã‚¹4å€‹
       min: "0 0 0"  # ã‚¹ãƒšãƒ¼ã‚¹4å€‹
   
3. ãƒªã‚¹ãƒˆè¨˜æ³•æ··åœ¨:
   çµ±ä¸€: ãƒã‚¤ãƒ•ãƒ³å¾Œã«ã‚¹ãƒšãƒ¼ã‚¹1å€‹
   
4. æ–‡å­—åˆ—å¼•ç”¨ç¬¦:
   åº§æ¨™ã¯å¼•ç”¨ç¬¦ã§('[]')
                    repairs.append({
                        'issue': issue['type'],
                        'action': 'pending_reset',
                        'success': True
                    })
        
        return repairs
    
    def restore_latest_backup(self):
        """æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¾©å…ƒ"""
        backups = sorted(
            self.backup_dir.glob("poker_*.yaml"),
            key=lambda p: p.stat().st_mtime,
            reverse=True
        )
        if backups:
            shutil.copy2(backups[0], self.yaml_file)
            return True
        return False
    
    def fix_yaml_format(self):
        """YAMLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¿®æ­£"""
        try:
            # ã‚¿ãƒ–ã‚’ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›
            content = self.yaml_file.read_text()
            content = content.replace('\t', '  ')
            
            # ä¿å­˜å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
            backup = self.yaml_file.with_suffix('.yaml.broken')
            shutil.copy2(self.yaml_file, backup)
            
            # ä¿®æ­£ç‰ˆä¿å­˜
            self.yaml_file.write_text(content)
            
            # æ¤œè¨¼
            with open(self.yaml_file, 'r') as f:
                yaml.safe_load(f)
            
            return True
        except:
            return False

# ä½¿ç”¨ä¾‹
if __name__ == "__main__":
    repairer = AutoRepairer()
    issues = repairer.run_diagnostics()
    
    if issues:
        print(f"ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ: {len(issues)}ä»¶")
        for issue in issues:
            print(f"- {issue['type']}: {issue['severity']}")
        
        repairs = repairer.auto_repair(issues)
        print(f"\nä¿®å¾©çµæœ:")
        for repair in repairs:
            status = "æˆåŠŸ" if repair['success'] else "å¤±æ•—"
            print(f"- {repair['issue']}: {status}")
    else:
        print("å•é¡Œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ")
```

---

## ğŸ¯ ã¾ã¨ã‚: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```
å•é¡Œç™ºç”Ÿ
    â†“
[ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºï¼Ÿ]
    Yes â†’ ç¬¬1ç« ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è¡¨å‚ç…§
    No  â†“
[MCPãƒ¡ã‚½ãƒƒãƒ‰ä½¿ç”¨ä¸å¯ï¼Ÿ]  
    Yes â†’ å•é¡ŒA1ï¼ˆMCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šï¼‰
    No  â†“
[è¨ˆç®—å®Ÿè¡Œã‚¨ãƒ©ãƒ¼ï¼Ÿ]
    Yes â†’ å•é¡ŒA2ï¼ˆpoker_cuiï¼‰
    No  â†“
[YAMLé–¢é€£ã‚¨ãƒ©ãƒ¼ï¼Ÿ]
    Yes â†’ ç¬¬4ç« YAMLå¯¾å‡¦
    No  â†“
[è¨ˆç®—çµæœç•°å¸¸ï¼Ÿ]
    Yes â†’ å•é¡ŒB2ï¼ˆç‰©ç†çš„ç•°å¸¸å€¤ï¼‰
    No  â†“
[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œï¼Ÿ]
    Yes â†’ ç¬¬6ç« æœ€é©åŒ–
    No  â†“
[ãã®ä»–ã®å•é¡Œ]
    â†’ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªï¼ˆç¬¬3ç« ï¼‰
    â†’ FAQå‚ç…§ï¼ˆç¬¬9ç« ï¼‰
    â†’ è‡ªå‹•ä¿®å¾©è©¦è¡Œï¼ˆç¬¬10ç« ï¼‰
```

---

**ğŸ“š é–¢é€£ãƒãƒ‹ãƒ¥ã‚¢ãƒ«**
- [ESSENTIAL_GUIDE.md](ESSENTIAL_GUIDE.md): åŸºæœ¬æ“ä½œï¼ˆå•é¡Œãªãå‹•ä½œã™ã‚‹å ´åˆï¼‰
- [QUICK_REFERENCE.md](QUICK_REFERENCE.md): ã‚³ãƒãƒ³ãƒ‰æ—©è¦‹è¡¨
- [PHYSICS_REFERENCE.md](PHYSICS_REFERENCE.md): ç‰©ç†çš„å¦¥å½“æ€§ç¢ºèª
- [INTEGRATION_GUIDE.md](INTEGRATION_GUIDE.md): ã‚·ã‚¹ãƒ†ãƒ çµ±åˆå•é¡Œ
- [RESEARCH_WORKFLOWS.md](RESEARCH_WORKFLOWS.md): è¨ˆç®—æ‰‹æ³•æœ€é©åŒ–

**âš ï¸ ç·Šæ€¥æ™‚ã®å¿ƒå¾—**
1. **ãƒ‘ãƒ‹ãƒƒã‚¯ã«ãªã‚‰ãªã„** - ã»ã¨ã‚“ã©ã®å•é¡Œã¯è§£æ±ºå¯èƒ½
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª** - è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå‘³æ–¹
3. **æ®µéšçš„å¯¾å‡¦** - ç°¡å˜ãªè§£æ±ºç­–ã‹ã‚‰è©¦ã™
4. **è¨˜éŒ²ã‚’æ®‹ã™** - åŒã˜å•é¡Œã®å†ç™ºé˜²æ­¢

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2.0 MCP Edition  
**ã‚µãƒãƒ¼ãƒˆ**: GitHub Issues / poker-mcp-support@example.com