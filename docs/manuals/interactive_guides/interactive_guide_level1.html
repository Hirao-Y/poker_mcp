<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›¡ï¸ Poker MCP Interactive Guide - Level 1: åŸºç¤ä½“é¨“</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        :root {
            --primary-blue: #1e3a8a;
            --primary-green: #059669;
            --warning-orange: #d97706;
            --danger-red: #dc2626;
            --bg-light: #f8fafc;
            --bg-panel: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --accent-physics: #7c3aed;
            --accent-success: #10b981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #e2e8f0 100%);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .main-header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-physics) 100%);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-container {
            flex: 1;
            max-width: 400px;
            margin: 0 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--accent-success);
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .level-indicator {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 0.25rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr 320px;
            gap: 1rem;
            padding: 1rem;
            height: calc(100vh - 140px);
        }

        .instruction-panel {
            background: var(--bg-panel);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow-y: auto;
        }

        .step-indicator {
            background: linear-gradient(135deg, var(--accent-physics), #9333ea);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .hint-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .hint-box strong {
            color: var(--warning-orange);
        }

        .visualization-panel {
            background: var(--bg-panel);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        #threejs-container {
            width: 100%;
            height: 100%;
        }

        .control-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.05);
        }

        .control-panel {
            background: var(--bg-panel);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow-y: auto;
        }

        .parameter-section {
            margin-bottom: 2rem;
        }

        .parameter-section h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .parameter-group {
            margin-bottom: 1.5rem;
        }

        .parameter-group label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .parameter-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .parameter-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .slider-container {
            margin: 0.5rem 0;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-blue);
            cursor: pointer;
        }

        .slider-value {
            display: inline-block;
            background: var(--primary-blue);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .primary-btn {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-physics));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 1rem 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .results-display {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid var(--primary-green);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 6px;
        }

        .result-label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .result-value {
            font-weight: bold;
            color: var(--primary-blue);
        }

        .status {
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status.ok {
            background: var(--primary-green);
            color: white;
        }

        .status.warning {
            background: var(--warning-orange);
            color: white;
        }

        .status.danger {
            background: var(--danger-red);
            color: white;
        }

        .navigation-footer {
            background: var(--bg-panel);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.05);
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .nav-btn.primary {
            background: var(--primary-blue);
            color: white;
        }

        .nav-btn.secondary {
            background: #e5e7eb;
            color: var(--text-primary);
        }

        .nav-btn:hover {
            transform: translateY(-1px);
        }

        .animation-controls {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .play-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .play-btn:hover {
            background: #047857;
            transform: scale(1.05);
        }

        .concept-explanation {
            background: linear-gradient(135deg, #ede9fe, #ddd6fe);
            border: 1px solid var(--accent-physics);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .physics-formula {
            background: #1f2937;
            color: #f3f4f6;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            text-align: center;
            font-size: 1.1rem;
        }

        .hidden {
            display: none;
        }

        /* ã‚¹ãƒ†ãƒƒãƒ—åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« */
        .step-1-1 .visualization-panel { border: 3px solid var(--accent-physics); }
        .step-1-2 .control-panel { border: 3px solid var(--primary-green); }
        .step-1-3 .instruction-panel { border: 3px solid var(--warning-orange); }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 280px 1fr 300px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
                height: auto;
            }
            
            .instruction-panel, .control-panel {
                height: auto;
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="main-header">
        <div class="logo">
            ğŸ›¡ï¸ Poker MCP Interactive Guide
        </div>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="main-progress" style="width: 0%"></div>
            </div>
            <div class="level-indicator">Level 1 - åŸºç¤ä½“é¨“ (15åˆ†å®Œäº†ç›®æ¨™)</div>
        </div>
        <div class="current-step" id="current-step-display">Step 1/3</div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content" id="main-content">
        <!-- å·¦ãƒ‘ãƒãƒ«: èª¬æ˜ãƒ»æ‰‹é † -->
        <div class="instruction-panel">
            <div class="step-indicator" id="step-indicator">Step 1: æ”¾å°„ç·šé®è”½ã¨ã¯ï¼Ÿ</div>
            <div id="instruction-content">
                <h2>ğŸ”¬ æ”¾å°„ç·šé®è”½ã®åŸºæœ¬åŸç†</h2>
                <p>æ”¾å°„ç·šé®è”½ã¨ã¯ã€æ”¾å°„ç·šã¨ç‰©è³ªã®ç›¸äº’ä½œç”¨ã«ã‚ˆã‚Š<strong>æ”¾å°„ç·šå¼·åº¦ã‚’æ¸›è¡°ã•ã›ã‚‹ç‰©ç†ç¾è±¡</strong>ã§ã™ã€‚</p>
                
                <div class="physics-formula">
                    I = Iâ‚€ Ã— e<sup>(-Î¼t)</sup> Ã— B(Î¼t)
                </div>
                
                <div class="concept-explanation">
                    <strong>ğŸ§® åŸºæœ¬æ¸›è¡°æ³•å‰‡ã®æ„å‘³:</strong><br>
                    â€¢ <strong>Iâ‚€</strong>: å…¥å°„æ”¾å°„ç·šå¼·åº¦<br>
                    â€¢ <strong>I</strong>: é€éæ”¾å°„ç·šå¼·åº¦<br>
                    â€¢ <strong>Î¼</strong>: ç·šæ¸›è¡°ä¿‚æ•°<br>
                    â€¢ <strong>t</strong>: é®è”½åšã•<br>
                    â€¢ <strong>B</strong>: ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•°
                </div>

                <div class="hint-box">
                    ğŸ’¡ <strong>å³å´ã®3Då¯è¦–åŒ–</strong>ã§å®Ÿéš›ã®é®è”½åŠ¹æœã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼<br>
                    èµ¤ã„çƒãŒç·šæºã€é’ã„ãƒ–ãƒ­ãƒƒã‚¯ãŒé®è”½æã€ç·‘ã®ç‚¹ãŒæ¸¬å®šç‚¹ã§ã™ã€‚
                </div>
            </div>
        </div>

        <!-- ä¸­å¤®: 3Då¯è¦–åŒ–ãƒ»æ“ä½œã‚¨ãƒªã‚¢ -->
        <div class="visualization-panel">
            <div id="threejs-container"></div>
            <div class="control-overlay">
                <button class="control-btn" id="rotate-view" title="è¦–ç‚¹å›è»¢">ğŸ”„ å›è»¢</button>
                <button class="control-btn" id="zoom-fit" title="å…¨ä½“è¡¨ç¤º">ğŸ” å…¨ä½“</button>
                <button class="control-btn" id="reset-view" title="ãƒªã‚»ãƒƒãƒˆ">ğŸ  ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
            <div class="animation-controls">
                <button class="play-btn" id="play-animation">â–¶ï¸ å‹•ç”»å†ç”Ÿ</button>
                <button class="play-btn" id="pause-animation" style="display: none;">â¸ï¸ ä¸€æ™‚åœæ­¢</button>
            </div>
        </div>

        <!-- å³ãƒ‘ãƒãƒ«: ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ»çµæœ -->
        <div class="control-panel">
            <div class="parameter-section">
                <h3>ğŸ”§ é®è”½ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                
                <div class="parameter-group">
                    <label>é®è”½ææ–™</label>
                    <select class="parameter-input" id="shield-material">
                        <option value="lead">é‰› (Pb)</option>
                        <option value="steel">é‹¼é‰„ (Fe)</option>
                        <option value="concrete" selected>ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ</option>
                        <option value="aluminum">ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ  (Al)</option>
                    </select>
                </div>

                <div class="parameter-group">
                    <label>åšã• (cm)</label>
                    <div class="slider-container">
                        <input type="range" class="slider" id="thickness-slider" 
                               min="0" max="50" value="10" step="1">
                        <span class="slider-value" id="thickness-value">10 cm</span>
                    </div>
                </div>

                <div class="parameter-group">
                    <label>è·é›¢ (cm)</label>
                    <div class="slider-container">
                        <input type="range" class="slider" id="distance-slider" 
                               min="50" max="200" value="100" step="10">
                        <span class="slider-value" id="distance-value">100 cm</span>
                    </div>
                </div>

                <div class="parameter-group">
                    <label>ç·šæºæ´»æ€§åº¦ (Bq)</label>
                    <select class="parameter-input" id="source-activity">
                        <option value="3.7e10" selected>3.7Ã—10Â¹â° (1 Ci)</option>
                        <option value="3.7e11">3.7Ã—10Â¹Â¹ (10 Ci)</option>
                        <option value="3.7e12">3.7Ã—10Â¹Â² (100 Ci)</option>
                    </select>
                </div>
            </div>

            <button class="primary-btn" id="calculate-btn">âš¡ è¨ˆç®—å®Ÿè¡Œ</button>

            <div class="results-display" id="results-display" style="display: none;">
                <h4>ğŸ“Š è¨ˆç®—çµæœ</h4>
                <div class="result-item">
                    <span class="result-label">ç·šé‡ç‡:</span>
                    <span class="result-value" id="dose-rate-result">-- Î¼Sv/h</span>
                    <span class="status" id="safety-status">--</span>
                </div>
                
                <div class="result-item">
                    <span class="result-label">æ¸›è¡°ç‡:</span>
                    <span class="result-value" id="attenuation-result">--</span>
                </div>

                <div class="result-item">
                    <span class="result-label">å®‰å…¨ä½™è£•:</span>
                    <span class="result-value" id="safety-margin">--</span>
                </div>
            </div>
        </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <footer class="navigation-footer">
        <button class="nav-btn secondary" id="prev-step" disabled>â† å‰ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
        <div style="display: flex; gap: 1rem;">
            <button class="nav-btn secondary" id="hint-btn">ğŸ’¡ ãƒ’ãƒ³ãƒˆ</button>
            <button class="nav-btn secondary" id="restart-btn">ğŸ”„ æœ€åˆã‹ã‚‰</button>
        </div>
        <button class="nav-btn primary" id="next-step">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— â†’</button>
    </footer>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let scene, camera, renderer, controls;
        let sourceGeometry, shieldGeometry, detectorGeometry;
        let radiationParticles = [];
        let animationId;
        let currentStep = 1;
        let isAnimationPlaying = false;

        // ç‰©ç†å®šæ•°ãƒ»ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const materialDatabase = {
            lead: { density: 11.34, muMass: 0.107, color: 0x696969, name: 'é‰›' },
            steel: { density: 7.87, muMass: 0.0565, color: 0xb0c4de, name: 'é‹¼é‰„' },
            concrete: { density: 2.3, muMass: 0.0636, color: 0xd2b48c, name: 'ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ' },
            aluminum: { density: 2.70, muMass: 0.0820, color: 0xc0c0c0, name: 'ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ' }
        };

        // å­¦ç¿’é€²è¡Œç®¡ç†
        class LearningProgressManager {
            constructor() {
                this.currentStep = 1;
                this.totalSteps = 3;
                this.completedActions = new Set();
                this.startTime = Date.now();
            }

            updateProgress() {
                const progress = (this.currentStep - 1) / this.totalSteps * 100;
                document.getElementById('main-progress').style.width = progress + '%';
                document.getElementById('current-step-display').textContent = `Step ${this.currentStep}/${this.totalSteps}`;
            }

            nextStep() {
                if (this.currentStep < this.totalSteps) {
                    this.currentStep++;
                    this.updateStepContent();
                    this.updateProgress();
                    this.trackAction('step_completed', this.currentStep - 1);
                } else {
                    this.completeLevel();
                }
            }

            updateStepContent() {
                const stepContents = {
                    1: {
                        title: 'Step 1: æ”¾å°„ç·šé®è”½ã¨ã¯ï¼Ÿ',
                        content: `
                            <h2>ğŸ”¬ æ”¾å°„ç·šé®è”½ã®åŸºæœ¬åŸç†</h2>
                            <p>æ”¾å°„ç·šé®è”½ã¨ã¯ã€æ”¾å°„ç·šã¨ç‰©è³ªã®ç›¸äº’ä½œç”¨ã«ã‚ˆã‚Š<strong>æ”¾å°„ç·šå¼·åº¦ã‚’æ¸›è¡°ã•ã›ã‚‹ç‰©ç†ç¾è±¡</strong>ã§ã™ã€‚</p>
                            
                            <div class="physics-formula">
                                I = Iâ‚€ Ã— e<sup>(-Î¼t)</sup> Ã— B(Î¼t)
                            </div>
                            
                            <div class="concept-explanation">
                                <strong>ğŸ§® åŸºæœ¬æ¸›è¡°æ³•å‰‡ã®æ„å‘³:</strong><br>
                                â€¢ <strong>Iâ‚€</strong>: å…¥å°„æ”¾å°„ç·šå¼·åº¦<br>
                                â€¢ <strong>I</strong>: é€éæ”¾å°„ç·šå¼·åº¦<br>
                                â€¢ <strong>Î¼</strong>: ç·šæ¸›è¡°ä¿‚æ•°<br>
                                â€¢ <strong>t</strong>: é®è”½åšã•<br>
                                â€¢ <strong>B</strong>: ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•°
                            </div>

                            <div class="hint-box">
                                ğŸ’¡ <strong>å³å´ã®3Då¯è¦–åŒ–</strong>ã§å®Ÿéš›ã®é®è”½åŠ¹æœã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼<br>
                                èµ¤ã„çƒãŒç·šæºã€é’ã„ãƒ–ãƒ­ãƒƒã‚¯ãŒé®è”½æã€ç·‘ã®ç‚¹ãŒæ¸¬å®šç‚¹ã§ã™ã€‚
                            </div>
                        `
                    },
                    2: {
                        title: 'Step 2: ææ–™ã«ã‚ˆã‚‹é•ã„ã‚’ä½“é¨“',
                        content: `
                            <h2>ğŸ§ª ææ–™ç‰¹æ€§ã¨é®è”½åŠ¹æœ</h2>
                            <p>ç•°ãªã‚‹ææ–™ã¯<strong>åŸå­ç•ªå·</strong>ã¨<strong>å¯†åº¦</strong>ã«ã‚ˆã‚Šã€é®è”½æ€§èƒ½ãŒå¤§ããå¤‰ã‚ã‚Šã¾ã™ã€‚</p>
                            
                            <div class="concept-explanation">
                                <strong>ğŸ“Š ææ–™æ¯”è¼ƒ (1 MeVã‚¬ãƒ³ãƒç·š):</strong><br>
                                â€¢ <strong>é‰›</strong>: é«˜å¯†åº¦ãƒ»é«˜æ€§èƒ½ (Î¼=0.77 cmâ»Â¹)<br>
                                â€¢ <strong>é‹¼é‰„</strong>: ä¸­å¯†åº¦ãƒ»ãƒãƒ©ãƒ³ã‚¹å‹<br>
                                â€¢ <strong>ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ</strong>: ä½ã‚³ã‚¹ãƒˆãƒ»å¤§å‹é®è”½ç”¨<br>
                                â€¢ <strong>ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ </strong>: è»½é‡ãƒ»ä½æ€§èƒ½
                            </div>

                            <div class="hint-box">
                                ğŸ’¡ <strong>å³å´ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong>ã§ææ–™ã‚„åšã•ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼<br>
                                ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é®è”½åŠ¹æœãŒå¤‰åŒ–ã™ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚
                            </div>

                            <div class="physics-formula">
                                Î¼ = (Î¼/Ï) Ã— Ï
                            </div>
                            <p style="text-align: center; font-size: 0.9rem; color: #6b7280;">
                                ç·šæ¸›è¡°ä¿‚æ•° = è³ªé‡æ¸›è¡°ä¿‚æ•° Ã— å¯†åº¦
                            </p>
                        `
                    },
                    3: {
                        title: 'Step 3: æœ€åˆã®é®è”½è¨­è¨ˆ',
                        content: `
                            <h2>ğŸ—ï¸ å®Ÿéš›ã®é®è”½è¨­è¨ˆä½“é¨“</h2>
                            <p><strong>ç›®æ¨™</strong>: ç·šé‡ç‡ã‚’è¦åˆ¶åŸºæº–å€¤ <strong>2.5 Î¼Sv/h ä»¥ä¸‹</strong> ã«ã™ã‚‹é®è”½ã‚’è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <div class="concept-explanation">
                                <strong>ğŸ¯ è¨­è¨ˆæ‰‹é †:</strong><br>
                                1. ç·šæºæ¡ä»¶ã®ç¢ºèª (Co-60, 1 Ci)<br>
                                2. æ¸¬å®šè·é›¢ã®è¨­å®š (100 cm)<br>
                                3. ææ–™ãƒ»åšã•ã®æœ€é©åŒ–<br>
                                4. è¦åˆ¶åŸºæº–ã¨ã®æ¯”è¼ƒç¢ºèª
                            </div>

                            <div class="hint-box">
                                ğŸ’¡ <strong>è¨­è¨ˆã®ã‚³ãƒ„</strong><br>
                                â€¢ åšã•ã‚’å¾ã€…ã«å¢—ã‚„ã—ã¦åŸºæº–å€¤ä»¥ä¸‹ã«<br>
                                â€¢ ææ–™ã”ã¨ã®ç‰¹æ€§ã‚’æ´»ç”¨<br>
                                â€¢ å®‰å…¨ä½™è£•ã‚‚è€ƒæ…®ã—ã¾ã—ã‚‡ã†
                            </div>

                            <div class="physics-formula">
                                å®‰å…¨ä½™è£• = (åŸºæº–å€¤ - è¨ˆç®—å€¤) / åŸºæº–å€¤ Ã— 100%
                            </div>
                        `
                    }
                };

                const stepData = stepContents[this.currentStep];
                document.getElementById('step-indicator').textContent = stepData.title;
                document.getElementById('instruction-content').innerHTML = stepData.content;

                // ã‚¹ãƒ†ãƒƒãƒ—å›ºæœ‰ã®CSSã‚¯ãƒ©ã‚¹é©ç”¨
                document.getElementById('main-content').className = `main-content step-1-${this.currentStep}`;
            }

            completeLevel() {
                const completionTime = (Date.now() - this.startTime) / 1000;
                alert(`ğŸ‰ Level 1 å®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼\n\nå®Œäº†æ™‚é–“: ${Math.round(completionTime)}ç§’\nå®Ÿè¡Œã—ãŸè¨ˆç®—: ${this.completedActions.size}å›\n\næ¬¡ã¯ Level 2: å®Ÿç”¨è¨­è¨ˆ ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ï¼`);
                
                // å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²ï¼ˆå®Ÿéš›ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã¯é€ä¿¡ï¼‰
                console.log('Learning completed:', {
                    level: 1,
                    completionTime: completionTime,
                    actions: Array.from(this.completedActions),
                    totalCalculations: this.completedActions.size
                });
            }

            trackAction(action, data) {
                this.completedActions.add(`${action}_${Date.now()}`);
                console.log('Action tracked:', action, data);
            }
        }

        // 3Då¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ 
        class Radiation3DVisualizer {
            constructor(container) {
                this.container = container;
                this.initializeScene();
                this.createObjects();
                this.animate();
                this.setupEventListeners();
            }

            initializeScene() {
                // ã‚·ãƒ¼ãƒ³ä½œæˆ
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0xf8fafc);

                // ã‚«ãƒ¡ãƒ©è¨­å®š
                camera = new THREE.PerspectiveCamera(75, this.container.clientWidth / this.container.clientHeight, 0.1, 1000);
                camera.position.set(5, 5, 8);
                camera.lookAt(0, 0, 0);

                // ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼è¨­å®š
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                renderer.shadowMap.enabled = true;
                renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                this.container.appendChild(renderer.domElement);

                // ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(5, 5, 5);
                directionalLight.castShadow = true;
                scene.add(directionalLight);

                // åº§æ¨™è»¸ã®è¡¨ç¤º
                const axesHelper = new THREE.AxesHelper(3);
                scene.add(axesHelper);

                // ç°¡æ˜“ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆãƒã‚¦ã‚¹ã§ã®è¦–ç‚¹å¤‰æ›´ï¼‰
                this.setupMouseControls();
            }

            setupMouseControls() {
                let isMouseDown = false;
                let mouseX = 0, mouseY = 0;
                let targetRotationX = 0, targetRotationY = 0;
                let rotationX = 0, rotationY = 0;

                this.container.addEventListener('mousedown', (event) => {
                    isMouseDown = true;
                    mouseX = event.clientX;
                    mouseY = event.clientY;
                });

                this.container.addEventListener('mousemove', (event) => {
                    if (!isMouseDown) return;
                    
                    const deltaX = event.clientX - mouseX;
                    const deltaY = event.clientY - mouseY;
                    
                    targetRotationY += deltaX * 0.01;
                    targetRotationX += deltaY * 0.01;
                    
                    mouseX = event.clientX;
                    mouseY = event.clientY;
                });

                this.container.addEventListener('mouseup', () => {
                    isMouseDown = false;
                });

                // ã‚¹ãƒ ãƒ¼ã‚ºãªå›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                const updateRotation = () => {
                    rotationX += (targetRotationX - rotationX) * 0.05;
                    rotationY += (targetRotationY - rotationY) * 0.05;
                    
                    const radius = 10;
                    camera.position.x = radius * Math.sin(rotationY) * Math.cos(rotationX);
                    camera.position.y = radius * Math.sin(rotationX);
                    camera.position.z = radius * Math.cos(rotationY) * Math.cos(rotationX);
                    camera.lookAt(0, 0, 0);
                    
                    requestAnimationFrame(updateRotation);
                };
                updateRotation();
            }

            createObjects() {
                // ç·šæº (èµ¤ã„çƒ)
                const sourceGeom = new THREE.SphereGeometry(0.3, 32, 32);
                const sourceMat = new THREE.MeshLambertMaterial({ 
                    color: 0xff4444,
                    emissive: 0x220000
                });
                sourceGeometry = new THREE.Mesh(sourceGeom, sourceMat);
                sourceGeometry.position.set(-3, 0, 0);
                sourceGeometry.castShadow = true;
                scene.add(sourceGeometry);

                // é®è”½æ (å¯å¤‰ã‚µã‚¤ã‚ºãƒ»è‰²)
                this.updateShield('concrete', 1.0);

                // æ¤œå‡ºå™¨ (ç·‘ã®ç‚¹)
                const detectorGeom = new THREE.SphereGeometry(0.2, 16, 16);
                const detectorMat = new THREE.MeshLambertMaterial({ 
                    color: 0x44ff44,
                    emissive: 0x002200
                });
                detectorGeometry = new THREE.Mesh(detectorGeom, detectorMat);
                detectorGeometry.position.set(3, 0, 0);
                scene.add(detectorGeometry);

                // è·é›¢ãƒ©ã‚¤ãƒ³
                this.createDistanceLine();

                // åºŠé¢
                const floorGeometry = new THREE.PlaneGeometry(20, 20);
                const floorMaterial = new THREE.MeshLambertMaterial({ 
                    color: 0xf0f0f0,
                    transparent: true,
                    opacity: 0.5
                });
                const floor = new THREE.Mesh(floorGeometry, floorMaterial);
                floor.rotation.x = -Math.PI / 2;
                floor.position.y = -2;
                floor.receiveShadow = true;
                scene.add(floor);

                // ãƒ©ãƒ™ãƒ«ä½œæˆ
                this.createLabels();
            }

            createLabels() {
                // WebGLä¸Šã§ã®ãƒ†ã‚­ã‚¹ãƒˆã¯è¤‡é›‘ãªã®ã§ã€CSS3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯
                // ã‚­ãƒ£ãƒ³ãƒã‚¹ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½¿ç”¨ã€‚ã“ã“ã§ã¯ç°¡ç•¥åŒ–ã—ã¦çœç•¥
                console.log('Labels created (simplified)');
            }

            updateShield(material, thickness) {
                // æ—¢å­˜ã®é®è”½æå‰Šé™¤
                if (shieldGeometry) {
                    scene.remove(shieldGeometry);
                }

                if (thickness > 0) {
                    const materialData = materialDatabase[material];
                    const shieldGeom = new THREE.BoxGeometry(thickness, 2, 2);
                    const shieldMat = new THREE.MeshLambertMaterial({ 
                        color: materialData.color,
                        transparent: true,
                        opacity: 0.7
                    });
                    shieldGeometry = new THREE.Mesh(shieldGeom, shieldMat);
                    shieldGeometry.position.set(0, 0, 0);
                    shieldGeometry.castShadow = true;
                    shieldGeometry.receiveShadow = true;
                    scene.add(shieldGeometry);
                }
            }

            updateDetectorPosition(distance) {
                if (detectorGeometry) {
                    detectorGeometry.position.x = distance / 100 * 3; // ã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´
                    this.createDistanceLine();
                }
            }

            createDistanceLine() {
                // æ—¢å­˜ã®ãƒ©ã‚¤ãƒ³ã‚’å‰Šé™¤
                const existingLine = scene.getObjectByName('distanceLine');
                if (existingLine) scene.remove(existingLine);

                // æ–°ã—ã„ãƒ©ã‚¤ãƒ³ä½œæˆ
                const points = [];
                points.push(sourceGeometry.position.clone());
                points.push(detectorGeometry.position.clone());

                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({ 
                    color: 0x888888,
                    lineDashSize: 0.1,
                    gapSize: 0.1
                });
                const line = new THREE.Line(geometry, material);
                line.name = 'distanceLine';
                scene.add(line);
            }

            createRadiationAnimation() {
                // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§æ”¾å°„ç·šã‚’è¡¨ç¾
                const particleCount = 50;
                const particles = new THREE.BufferGeometry();
                const positions = new Float32Array(particleCount * 3);
                
                for (let i = 0; i < particleCount; i++) {
                    positions[i * 3] = sourceGeometry.position.x;
                    positions[i * 3 + 1] = sourceGeometry.position.y;
                    positions[i * 3 + 2] = sourceGeometry.position.z;
                }
                
                particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                
                const particleMaterial = new THREE.PointsMaterial({
                    color: 0xff6666,
                    size: 0.1,
                    transparent: true,
                    opacity: 0.8
                });
                
                const particleSystem = new THREE.Points(particles, particleMaterial);
                scene.add(particleSystem);
                
                return particleSystem;
            }

            playRadiationAnimation() {
                if (isAnimationPlaying) return;
                
                isAnimationPlaying = true;
                const particles = this.createRadiationAnimation();
                
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—
                const animateParticles = () => {
                    if (!isAnimationPlaying) {
                        scene.remove(particles);
                        return;
                    }
                    
                    const positions = particles.geometry.attributes.position.array;
                    
                    for (let i = 0; i < positions.length; i += 3) {
                        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ç·šæºã‹ã‚‰æ¤œå‡ºå™¨æ–¹å‘ã¸ç§»å‹•
                        positions[i] += 0.1; // Xæ–¹å‘
                        
                        // ç¯„å›²å¤–ã«ãªã£ãŸã‚‰ãƒªã‚»ãƒƒãƒˆ
                        if (positions[i] > detectorGeometry.position.x) {
                            positions[i] = sourceGeometry.position.x;
                        }
                    }
                    
                    particles.geometry.attributes.position.needsUpdate = true;
                    
                    animationId = requestAnimationFrame(animateParticles);
                };
                
                animateParticles();
            }

            pauseRadiationAnimation() {
                isAnimationPlaying = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            }

            animate() {
                const render = () => {
                    requestAnimationFrame(render);
                    
                    // ç·šæºã‚’å¾®ç´°ã«å›è»¢ã•ã›ã‚‹
                    if (sourceGeometry) {
                        sourceGeometry.rotation.y += 0.01;
                    }
                    
                    renderer.render(scene, camera);
                };
                render();
            }

            setupEventListeners() {
                // ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
                window.addEventListener('resize', () => {
                    camera.aspect = this.container.clientWidth / this.container.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                });
            }
        }

        // è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç°¡ç•¥ç‰ˆï¼‰
        class ShieldingCalculator {
            constructor() {
                this.safetyLimit = 2.5; // Î¼Sv/h
            }

            calculate(material, thickness, distance, activity) {
                const materialData = materialDatabase[material];
                
                // ç·šæ¸›è¡°ä¿‚æ•°
                const mu = materialData.muMass * materialData.density;
                
                // åŸºæœ¬æ¸›è¡°
                const attenuation = Math.exp(-mu * thickness);
                
                // ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ä¿‚æ•° (ç°¡ç•¥åŒ–)
                const buildup = 1 + (2.5 - 1) * mu * thickness * Math.exp(-mu * thickness);
                
                // è·é›¢ã®é€†äºŒä¹—å‰‡
                const geometricFactor = 1 / (4 * Math.PI * Math.pow(distance, 2));
                
                // ã‚¬ãƒ³ãƒç·šå®šæ•° (Co-60: 1.32 RÂ·cmÂ²/hÂ·mCi at 1cm)
                const gammaConstant = 1.32 * 10; // Î¼Sv/hæ›ç®—
                
                // ç·šé‡ç‡è¨ˆç®—
                const doseRate = (activity / 3.7e10) * gammaConstant * geometricFactor * attenuation * buildup;
                
                // çµæœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
                return {
                    doseRate: Math.max(doseRate, 0.001), // æœ€å°å€¤è¨­å®š
                    attenuation: attenuation,
                    buildup: buildup,
                    safetyStatus: doseRate <= this.safetyLimit,
                    safetyMargin: doseRate <= this.safetyLimit ? 
                        ((this.safetyLimit - doseRate) / this.safetyLimit * 100) : 0
                };
            }
        }

        // ãƒ¡ã‚¤ãƒ³åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            const progressManager = new LearningProgressManager();
            const calculator = new ShieldingCalculator();
            let visualizer;

            // 3Då¯è¦–åŒ–åˆæœŸåŒ–
            setTimeout(() => {
                const container = document.getElementById('threejs-container');
                visualizer = new Radiation3DVisualizer(container);
                
                // åˆæœŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åæ˜ 
                updateVisualization();
            }, 100);

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
            setupEventListeners();

            function setupEventListeners() {
                // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
                document.getElementById('shield-material').addEventListener('change', updateVisualization);
                document.getElementById('thickness-slider').addEventListener('input', function() {
                    document.getElementById('thickness-value').textContent = this.value + ' cm';
                    updateVisualization();
                });
                document.getElementById('distance-slider').addEventListener('input', function() {
                    document.getElementById('distance-value').textContent = this.value + ' cm';
                    updateVisualization();
                });

                // è¨ˆç®—å®Ÿè¡Œ
                document.getElementById('calculate-btn').addEventListener('click', performCalculation);

                // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
                document.getElementById('next-step').addEventListener('click', () => {
                    progressManager.nextStep();
                });
                
                document.getElementById('prev-step').addEventListener('click', () => {
                    if (progressManager.currentStep > 1) {
                        progressManager.currentStep--;
                        progressManager.updateStepContent();
                        progressManager.updateProgress();
                    }
                });

                // 3Dåˆ¶å¾¡
                document.getElementById('play-animation').addEventListener('click', function() {
                    if (visualizer) {
                        visualizer.playRadiationAnimation();
                        this.style.display = 'none';
                        document.getElementById('pause-animation').style.display = 'block';
                    }
                });

                document.getElementById('pause-animation').addEventListener('click', function() {
                    if (visualizer) {
                        visualizer.pauseRadiationAnimation();
                        this.style.display = 'none';
                        document.getElementById('play-animation').style.display = 'block';
                    }
                });

                document.getElementById('reset-view').addEventListener('click', function() {
                    if (camera) {
                        camera.position.set(5, 5, 8);
                        camera.lookAt(0, 0, 0);
                    }
                });

                // ãƒ’ãƒ³ãƒˆè¡¨ç¤º
                document.getElementById('hint-btn').addEventListener('click', showContextualHint);

                // ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ
                document.getElementById('restart-btn').addEventListener('click', function() {
                    progressManager.currentStep = 1;
                    progressManager.updateStepContent();
                    progressManager.updateProgress();
                });
            }

            function updateVisualization() {
                if (!visualizer) return;

                const material = document.getElementById('shield-material').value;
                const thickness = parseFloat(document.getElementById('thickness-slider').value);
                const distance = parseFloat(document.getElementById('distance-slider').value);

                // 3Dæ›´æ–°
                visualizer.updateShield(material, thickness / 10); // ã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´
                visualizer.updateDetectorPosition(distance);

                // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—è¡¨ç¤ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
                if (document.getElementById('results-display').style.display !== 'none') {
                    performCalculation();
                }
            }

            function performCalculation() {
                const material = document.getElementById('shield-material').value;
                const thickness = parseFloat(document.getElementById('thickness-slider').value);
                const distance = parseFloat(document.getElementById('distance-slider').value);
                const activity = parseFloat(document.getElementById('source-activity').value);

                // è¨ˆç®—å®Ÿè¡Œ
                const results = calculator.calculate(material, thickness, distance, activity);

                // çµæœè¡¨ç¤º
                displayResults(results);
                
                // å­¦ç¿’è¿½è·¡
                progressManager.trackAction('calculation_performed', {
                    material, thickness, distance, activity, results: results.doseRate
                });

                // çµæœã«åŸºã¥ããƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                provideFeedback(results);
            }

            function displayResults(results) {
                const resultsPanel = document.getElementById('results-display');
                resultsPanel.style.display = 'block';

                // ç·šé‡ç‡
                document.getElementById('dose-rate-result').textContent = 
                    results.doseRate.toFixed(2) + ' Î¼Sv/h';

                // å®‰å…¨çŠ¶æ…‹
                const safetyStatus = document.getElementById('safety-status');
                if (results.safetyStatus) {
                    safetyStatus.textContent = 'âœ… åŸºæº–å†…';
                    safetyStatus.className = 'status ok';
                } else {
                    safetyStatus.textContent = 'âš ï¸ åŸºæº–è¶…é';
                    safetyStatus.className = 'status danger';
                }

                // æ¸›è¡°ç‡
                document.getElementById('attenuation-result').textContent = 
                    (results.attenuation * 100).toFixed(1) + '%';

                // å®‰å…¨ä½™è£•
                document.getElementById('safety-margin').textContent = 
                    results.safetyMargin.toFixed(1) + '%';

                // çµæœã«åŸºã¥ã„ã¦è¦–è¦šåŠ¹æœ
                updateVisualFeedback(results);
            }

            function updateVisualFeedback(results) {
                // æ¤œå‡ºå™¨ã®è‰²ã‚’çµæœã«åŸºã¥ã„ã¦å¤‰æ›´
                if (detectorGeometry) {
                    const color = results.safetyStatus ? 0x44ff44 : 0xff4444;
                    detectorGeometry.material.color.setHex(color);
                    detectorGeometry.material.emissive.setHex(
                        results.safetyStatus ? 0x002200 : 0x220000
                    );
                }
            }

            function provideFeedback(results) {
                const material = document.getElementById('shield-material').value;
                const materialName = materialDatabase[material].name;
                
                let feedback = '';
                
                if (results.safetyStatus) {
                    if (results.safetyMargin > 50) {
                        feedback = `ğŸ‰ ç´ æ™´ã‚‰ã—ã„ï¼${materialName}ã§ååˆ†ãªå®‰å…¨ä½™è£•ã‚’ç¢ºä¿ã§ãã¾ã—ãŸã€‚ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã‚‚è€ƒæ…®ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚`;
                    } else {
                        feedback = `âœ… è¦åˆ¶åŸºæº–ã‚’ã‚¯ãƒªã‚¢ï¼å®‰å…¨ä½™è£•ã¯${results.safetyMargin.toFixed(1)}%ã§ã™ã€‚`;
                    }
                } else {
                    if (results.doseRate > calculator.safetyLimit * 2) {
                        feedback = `âš ï¸ ç·šé‡ç‡ãŒé«˜ã™ãã¾ã™ã€‚åšã•ã‚’å¢—åŠ ã™ã‚‹ã‹ã€ã‚ˆã‚ŠåŠ¹æœçš„ãªææ–™ã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚`;
                    } else {
                        feedback = `ğŸ“ ã‚‚ã†å°‘ã—ã§ã™ï¼åšã•ã‚’${Math.ceil((results.doseRate - calculator.safetyLimit) / calculator.safetyLimit * 10)}cmå¢—åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚`;
                    }
                }

                // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤ºï¼ˆç°¡æ˜“ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
                setTimeout(() => {
                    if (feedback) alert(feedback);
                }, 500);
            }

            function showContextualHint() {
                const hints = {
                    1: "ğŸ’¡ æ”¾å°„ç·šã¯è·é›¢ã®2ä¹—ã«åæ¯”ä¾‹ã—ã¦æ¸›è¡°ã—ã¾ã™ã€‚è·é›¢ã‚’2å€ã«ã™ã‚‹ã¨å¼·åº¦ã¯1/4ã«ãªã‚Šã¾ã™ï¼",
                    2: "ğŸ’¡ é‰›ã¯å¯†åº¦ãŒé«˜ã„ãŸã‚å°‘ãªã„åšã•ã§åŠ¹æœçš„ã§ã™ãŒã€é‡é‡ã¨ã‚³ã‚¹ãƒˆã‚‚è€ƒæ…®ãŒå¿…è¦ã§ã™ã€‚",
                    3: "ğŸ’¡ è¨­è¨ˆç›®æ¨™ã¯2.5 Î¼Sv/hä»¥ä¸‹ã§ã™ã€‚å®‰å…¨ä½™è£•10-20%ã‚’ç¢ºä¿ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚"
                };
                
                alert(hints[progressManager.currentStep] || "ğŸ’¡ å³å´ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´ã—ã¦ã€çµæœãŒã©ã†å¤‰ã‚ã‚‹ã‹è¦³å¯Ÿã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼");
            }

            // åˆæœŸçŠ¶æ…‹è¨­å®š
            progressManager.updateProgress();
            
            // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            setTimeout(() => {
                alert("ğŸ›¡ï¸ Poker MCP Interactive Guide Level 1 ã¸ã‚ˆã†ã“ãï¼\n\n15åˆ†ã§æ”¾å°„ç·šé®è”½ã®åŸºæœ¬ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ã‚‡ã†ã€‚\n\nå³å´ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ãªãŒã‚‰ã€3Då¯è¦–åŒ–ã§é®è”½åŠ¹æœã‚’ä½“æ„Ÿã—ã¦ãã ã•ã„ï¼");
            }, 1000);
        });
    </script>
</body>
</html>