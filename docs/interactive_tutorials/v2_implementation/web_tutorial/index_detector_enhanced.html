<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ Poker MCP å¯è¦–åŒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆ</title>
    <style>
        /* å‰å›ã¨åŒã˜CSS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            min-height: 100vh;
        }
        
        header {
            background: #007bff;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .progress-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            position: relative;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 20%;
        }
        
        .progress-text {
            font-weight: 600;
            color: #495057;
            text-align: center;
            display: block;
        }
        
        .system-status {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .status-badge {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            background: #28a745;
            border: 2px solid #20c997;
            color: white;
        }
        
        .content-area, .visualization-area, .input-section, .output-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .step-content h2 {
            color: #007bff;
            margin-bottom: 15px;
        }
        
        .step-description {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
        
        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .viz-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .viz-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .viz-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        #geometryCanvas {
            width: 100%;
            height: 400px;
            border: 2px solid #28a745;
            border-radius: 8px;
            background: #f8f9fa;
            display: block;
            margin: 15px 0;
            cursor: crosshair;
        }
        
        .viz-message {
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            background: rgba(40, 167, 69, 0.1);
            color: #155724;
            border: 1px solid rgba(40, 167, 69, 0.2);
            font-size: 0.9rem;
            text-align: center;
            font-weight: 500;
        }
        
        .mode-info {
            margin-top: 15px;
            padding: 12px;
            background: rgba(40, 167, 69, 0.1);
            border-radius: 6px;
            font-size: 0.9rem;
            border: 1px solid rgba(40, 167, 69, 0.2);
        }
        
        .mode-info div {
            margin: 4px 0;
            color: #155724;
            font-weight: 500;
        }
        
        #jsonInput {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            background: #f8f9fa;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .primary-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .primary-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .secondary-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .secondary-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .secondary-btn:disabled {
            background: #adb5bd;
            cursor: not-allowed;
            transform: none;
        }
        
        .output-content {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            overflow-x: auto;
            color: #495057;
        }
        
        .output-content.success {
            border-color: #28a745;
            color: #155724;
            background: rgba(40, 167, 69, 0.05);
        }
        
        .output-content.error {
            border-color: #dc3545;
            color: #721c24;
            background: rgba(220, 53, 69, 0.05);
        }
        
        .navigation {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            #geometryCanvas { height: 300px; }
            .viz-header { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¨ æ”¾å°„ç·šé®è”½è¨ˆç®— å¯è¦–åŒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆ</h1>
            <p>Co-60ç·šæºã‚’ä½¿ç”¨ã—ãŸåŒ»ç™‚æ–½è¨­é®è”½è¨­è¨ˆã®å­¦ç¿’ï¼ˆæ¤œå‡ºå™¨æ´»å‹•ã®æ˜ç¢ºè¡¨ç¤ºï¼‰</p>
        </header>

        <main>
            <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">Step 1 / 5</span>
            </div>

            <!-- ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ -->
            <div class="system-status">
                <span class="status-badge">ğŸ¨ ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œä¸­</span>
                <span class="status-badge">ğŸ“Š Canvas2Dåˆ©ç”¨å¯èƒ½</span>
                <span class="status-badge">âœ… åˆæœŸåŒ–å®Œäº†</span>
            </div>

            <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <div class="content-area" id="contentArea">
                <div class="step-content">
                    <h2>Step 1: Co-60ç·šæºã®è¨­å®š</h2>
                    <div class="step-description">
                        <p><strong>æ¦‚è¦:</strong> åŒ»ç™‚ç”¨Co-60ç·šæºã‚’åŸç‚¹ã«é…ç½®ã—ã€æ”¾å°„ç·šæºã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚</p>
                        <p><strong>å­¦ç¿’ç›®æ¨™:</strong> æ”¾å°„ç·šæºã®åŸºæœ¬æ¦‚å¿µã¨è¦–è¦šçš„ç†è§£ã‚’å­¦ç¿’ã—ã¾ã™ã€‚</p>
                        <p><strong>æ¤œå‡ºå™¨ã®è¦‹æ–¹:</strong> ç·‘è‰²ã®å››è§’ãŒæ¤œå‡ºå™¨ã€ä¸­å¤®ã®å††ã¯ç·šé‡ç‡ãƒ¬ãƒ™ãƒ«ã€ä¸‹ã®æ•°å€¤ã¯è¨ˆæ•°ç‡ï¼ˆcpsï¼‰ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- å¯è¦–åŒ–ã‚¨ãƒªã‚¢ -->
            <div class="visualization-area">
                <div class="viz-header">
                    <h4>ğŸ¨ 2D å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ç‰ˆï¼‰</h4>
                    <div class="viz-controls">
                        <button id="testDrawBtn" class="viz-btn">ğŸ§ª ãƒ†ã‚¹ãƒˆæç”»</button>
                        <button id="clearBtn" class="viz-btn">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</button>
                        <button id="infoBtn" class="viz-btn">ğŸ“‹ æƒ…å ±</button>
                    </div>
                </div>
                
                <canvas id="geometryCanvas" width="600" height="400"></canvas>
                
                <div class="viz-message" id="vizMessage">
                    âœ… å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº† - ãƒ†ã‚¹ãƒˆæç”»ã§æ¤œå‡ºå™¨ã®æ´»å‹•ã‚’ç¢ºèªã—ã¦ãã ã•ã„
                </div>
                
                <div class="mode-info">
                    <div>ãƒ¢ãƒ¼ãƒ‰: 2D | è§£åƒåº¦: 600x400</div>
                    <div id="objectInfo">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: ç·šæº 0å€‹ | é®è”½ä½“ 0å€‹ | æ¤œå‡ºå™¨ 0å€‹</div>
                    <div><strong>æ¤œå‡ºå™¨è¡¨ç¤ºèª¬æ˜:</strong> ğŸŸ¢=æ¤œå‡ºå™¨æœ¬ä½“ã€âšª=ç·šé‡ç‡ã€æ•°å€¤=è¨ˆæ•°ç‡(cps)</div>
                </div>
            </div>

            <!-- JSONå…¥åŠ› -->
            <div class="input-section">
                <h3>ğŸ“ JSON-RPC 2.0 å…¥åŠ›</h3>
                <textarea id="jsonInput" rows="8">{
  "jsonrpc": "2.0",
  "method": "pokerinput_proposeSource",
  "params": {
    "name": "co60_medical",
    "type": "POINT",
    "position": "0 0 0",
    "inventory": [
      {
        "nuclide": "Co60",
        "radioactivity": 37000000000
      }
    ]
  },
  "id": 1
}</textarea>
                <div class="button-group">
                    <button id="executeBtn" class="primary-btn">ğŸš€ å®Ÿè¡Œ</button>
                    <button id="validateBtn" class="secondary-btn">âœ… æ¤œè¨¼</button>
                    <button id="clearJsonBtn" class="secondary-btn">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</button>
                </div>
            </div>

            <!-- çµæœè¡¨ç¤º -->
            <div class="output-section">
                <h3>ğŸ“Š å®Ÿè¡Œçµæœ</h3>
                <pre id="jsonOutput" class="output-content">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</pre>
            </div>

            <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="navigation">
                <button id="prevBtn" class="secondary-btn" disabled>â¬…ï¸ å‰ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
                <button id="nextBtn" class="primary-btn">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— â¡ï¸</button>
                <button id="resetBtn" class="secondary-btn">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </main>

        <footer>
            <p>ğŸ“ Poker MCP Tutorial System v3.4 - æ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ç‰ˆ</p>
        </footer>
    </div>

    <script>
        // æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆçµ±åˆJavaScript
        console.log('ğŸš€ æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆã‚·ã‚¹ãƒ†ãƒ é–‹å§‹...');
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentStep = 1;
        const totalSteps = 5;
        let canvas, ctx;
        let sources = new Map();
        let shields = new Map();
        let detectors = new Map();
        let animationId;
        let animationTime = 0;
        let interactions = 0;
        
        // æ¤œå‡ºå™¨ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆæ¨¡æ“¬ï¼‰
        let detectorCounts = new Map();
        
        // ã‚¹ãƒ†ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿
        const steps = [
            {
                title: "Step 1: Co-60ç·šæºã®è¨­å®š",
                content: "åŒ»ç™‚ç”¨Co-60ç·šæºã‚’åŸç‚¹ã«é…ç½®ã—ã€æ”¾å°„ç·šæºã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚",
                learning: "æ”¾å°„ç·šæºã®åŸºæœ¬æ¦‚å¿µã¨è¦–è¦šçš„ç†è§£ã‚’å­¦ç¿’ã—ã¾ã™ã€‚æ¤œå‡ºå™¨ã¯æ”¾å°„ç·šã‚’å—ã‘ã¦æ´»å‹•ã—ã¾ã™ã€‚",
                json: `{
  "jsonrpc": "2.0",
  "method": "pokerinput_proposeSource",
  "params": {
    "name": "co60_medical",
    "type": "POINT",
    "position": "0 0 0",
    "inventory": [{"nuclide": "Co60", "radioactivity": 37000000000}]
  },
  "id": 1
}`
            },
            {
                title: "Step 2: ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆé®è”½ä½“",
                content: "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆçƒå½¢é®è”½ä½“ã‚’è¿½åŠ ã—ã€åŸºæœ¬çš„ãªé®è”½æ§‹é€ ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚",
                learning: "é®è”½ä½“ã«ã‚ˆã‚‹æ”¾å°„ç·šã®æ¸›è¡°åŠ¹æœã‚’æ¤œå‡ºå™¨ã®è¨ˆæ•°ç‡å¤‰åŒ–ã§ç¢ºèªã—ã¾ã™ã€‚",
                json: `{
  "jsonrpc": "2.0",
  "method": "pokerinput_proposeBody",
  "params": {
    "name": "concrete_shield",
    "type": "SPH",
    "center": "0 0 0",
    "radius": 50
  },
  "id": 2
}`
            },
            {
                title: "Step 3: æ¤œå‡ºå™¨é…ç½®",
                content: "ç·šé‡ç‡æ¸¬å®šç”¨æ¤œå‡ºå™¨ã‚¢ãƒ¬ã‚¤ã‚’é…ç½®ã—ã€æ¸¬å®šç³»ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚",
                learning: "è¤‡æ•°æ¤œå‡ºå™¨ã«ã‚ˆã‚‹ç©ºé–“ç·šé‡ç‡åˆ†å¸ƒã®æ¸¬å®šã‚’ä½“é¨“ã—ã¾ã™ã€‚å„æ¤œå‡ºå™¨ã®æ´»å‹•ãŒç•°ãªã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
                json: `{
  "jsonrpc": "2.0",
  "method": "pokerinput_proposeDetector",
  "params": {
    "name": "dose_survey",
    "origin": "60 0 0",
    "grid": [{"edge": "10 0 0", "number": 10}]
  },
  "id": 3
}`
            },
            {
                title: "Step 4: é‰›é®è”½è¿½åŠ ",
                content: "å†…å´ã«é‰›é®è”½çƒã‚’è¿½åŠ ã—ã€è¤‡åˆé®è”½æ§‹é€ ã‚’å®Œæˆã•ã›ã¾ã™ã€‚",
                learning: "é‰›è¿½åŠ ã«ã‚ˆã‚‹æ¤œå‡ºå™¨è¨ˆæ•°ç‡ã®ã•ã‚‰ãªã‚‹æ¸›å°‘ã‚’è¦³å¯Ÿã—ã¾ã™ã€‚",
                json: `{
  "jsonrpc": "2.0",
  "method": "pokerinput_proposeBody",
  "params": {
    "name": "lead_inner_shield",
    "type": "SPH",
    "center": "0 0 0",
    "radius": 18
  },
  "id": 4
}`
            },
            {
                title: "Step 5: å®Œæˆãƒ»ä¿å­˜",
                content: "é®è”½è¨­è¨ˆã‚’å®Œæˆã•ã›ã€è¨ˆç®—çµæœã‚’ä¿å­˜ã—ã¾ã™ã€‚",
                learning: "æœ€çµ‚çš„ãªé®è”½åŠ¹æœã‚’æ¤œå‡ºå™¨ã®è¨ˆæ•°ç‡ã§å®šé‡çš„ã«è©•ä¾¡ã—ã¾ã™ã€‚",
                json: `{
  "jsonrpc": "2.0",
  "method": "pokerinput_applyChanges",
  "params": {
    "backup_comment": "Medical Co-60 shielding design completed"
  },
  "id": 5
}`
            }
        ];
        
        // åˆæœŸåŒ–
        function init() {
            console.log('ğŸ¯ æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–é–‹å§‹...');
            
            // CanvasåˆæœŸåŒ–
            canvas = document.getElementById('geometryCanvas');
            ctx = canvas.getContext('2d');
            
            if (!ctx) {
                console.error('âŒ CanvasåˆæœŸåŒ–å¤±æ•—');
                return;
            }
            
            // Canvasè¨­å®š
            setupCanvas();
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            setupEvents();
            
            // åˆæœŸæç”»
            render();
            startAnimation();
            
            // UIæ›´æ–°
            updateUI();
            
            console.log('âœ… æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†');
        }
        
        // Canvasè¨­å®š
        function setupCanvas() {
            canvas.width = 600;
            canvas.height = 400;
            canvas.style.width = '100%';
            canvas.style.height = '400px';
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        function setupEvents() {
            document.getElementById('testDrawBtn').onclick = testDraw;
            document.getElementById('clearBtn').onclick = clearAll;
            document.getElementById('infoBtn').onclick = showInfo;
            document.getElementById('executeBtn').onclick = executeJson;
            document.getElementById('validateBtn').onclick = validateJson;
            document.getElementById('clearJsonBtn').onclick = clearJson;
            document.getElementById('nextBtn').onclick = nextStep;
            document.getElementById('prevBtn').onclick = prevStep;
            document.getElementById('resetBtn').onclick = resetTutorial;
        }
        
        // ãƒ†ã‚¹ãƒˆæç”»
        function testDraw() {
            console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆæç”»å®Ÿè¡Œï¼ˆæ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ç‰ˆï¼‰');
            
            // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
            addSource('co60_test', [0, 0, 0], 'Co-60', 37000000000);
            addShield('concrete_shield', 'SPH', {center: [0, 0, 0], radius: 60}, 'CONCRETE');
            addShield('lead_shield', 'SPH', {center: [0, 0, 0], radius: 25}, 'LEAD');
            addDetector('detector_array', [100, 0, 0], [{edge: [10, 0, 0], number: 8}]);
            
            showMessage('âœ… ãƒ†ã‚¹ãƒˆæç”»å®Œäº†ï¼šæ¤œå‡ºå™¨ã®æ´»å‹•è¡¨ç¤ºã‚’ç¢ºèªã—ã¦ãã ã•ã„');
            updateObjectInfo();
        }
        
        // ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
        function addSource(name, position, nuclide, activity) {
            sources.set(name, {name, position, nuclide, activity});
            updateDetectorCounts(); // æ¤œå‡ºå™¨è¨ˆæ•°æ›´æ–°
            render();
        }
        
        function addShield(name, type, params, material) {
            shields.set(name, {name, type, params, material});
            updateDetectorCounts(); // æ¤œå‡ºå™¨è¨ˆæ•°æ›´æ–°
            render();
        }
        
        function addDetector(name, origin, grid) {
            detectors.set(name, {name, origin, grid});
            updateDetectorCounts(); // æ¤œå‡ºå™¨è¨ˆæ•°æ›´æ–°
            render();
        }
        
        // æ¤œå‡ºå™¨è¨ˆæ•°ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆæ¨¡æ“¬è¨ˆç®—ï¼‰
        function updateDetectorCounts() {
            detectorCounts.clear();
            
            if (sources.size === 0) return;
            
            // é®è”½åŠ¹æœã‚’è€ƒæ…®ã—ãŸæ¨¡æ“¬è¨ˆç®—
            let shieldingFactor = 1.0;
            
            shields.forEach(shield => {
                if (shield.material === 'CONCRETE') {
                    shieldingFactor *= 0.15; // ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã«ã‚ˆã‚‹æ¸›è¡°
                } else if (shield.material === 'LEAD') {
                    shieldingFactor *= 0.05; // é‰›ã«ã‚ˆã‚‹å¼·ã„æ¸›è¡°
                }
            });
            
            // åŸºæœ¬è¨ˆæ•°ç‡ï¼ˆç·šæºã‹ã‚‰è·é›¢ã«ã‚ˆã‚‹æ¸›è¡°ã‚’å«ã‚€ï¼‰
            detectors.forEach(detector => {
                const count = detector.grid[0] ? detector.grid[0].number || 5 : 1;
                
                for (let i = 0; i < count; i++) {
                    // è·é›¢ã«ã‚ˆã‚‹æ¸›è¡°ï¼ˆç°¡æ˜“è¨ˆç®—ï¼‰
                    const distance = 100 + i * 10; // cm
                    const distanceFactor = 10000 / (distance * distance); // é€†äºŒä¹—æ³•å‰‡
                    
                    // æœ€çµ‚è¨ˆæ•°ç‡
                    const baseCount = 50000; // åŸºæœ¬è¨ˆæ•°ç‡ (cps)
                    const finalCount = Math.floor(baseCount * distanceFactor * shieldingFactor);
                    
                    detectorCounts.set(`${detector.name}_${i}`, {
                        count: finalCount,
                        doseRate: finalCount * 0.01, // ç°¡æ˜“ç·šé‡ç‡å¤‰æ› (Î¼Sv/h)
                        distance: distance
                    });
                }
            });
        }
        
        // å…¨ã‚¯ãƒªã‚¢
        function clearAll() {
            sources.clear();
            shields.clear();
            detectors.clear();
            detectorCounts.clear();
            render();
            showMessage('ğŸ—‘ï¸ å…¨è¦ç´ ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            updateObjectInfo();
        }
        
        // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function render() {
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // èƒŒæ™¯
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = '#f0f8ff';
            ctx.fillRect(0, 0, width, height);
            
            // ã‚°ãƒªãƒƒãƒ‰
            drawGrid();
            
            // è»¸
            drawAxes(centerX, centerY);
            
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
            drawShields(centerX, centerY);
            drawSources(centerX, centerY);
            drawDetectors(centerX, centerY); // æ”¹è‰¯ç‰ˆæ¤œå‡ºå™¨æç”»
            
            // æƒ…å ±
            drawInfo();
        }
        
        // ã‚°ãƒªãƒƒãƒ‰æç”»
        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            for (let x = 0; x <= canvas.width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= canvas.height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }
        
        // è»¸æç”»
        function drawAxes(centerX, centerY) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // Xè»¸
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            // Yè»¸
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // ãƒ©ãƒ™ãƒ«
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('X', canvas.width - 20, centerY - 10);
            ctx.fillText('Y', centerX + 10, 20);
        }
        
        // é®è”½ä½“æç”»
        function drawShields(centerX, centerY) {
            shields.forEach(shield => {
                const isLead = shield.material === 'LEAD';
                const radius = shield.params.radius * 0.8;
                
                ctx.fillStyle = isLead ? 'rgba(80, 80, 80, 0.3)' : 'rgba(192, 192, 192, 0.3)';
                ctx.strokeStyle = isLead ? '#333' : '#888';
                ctx.lineWidth = isLead ? 4 : 3;
                
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();
                
                // ãƒ©ãƒ™ãƒ«
                ctx.fillStyle = ctx.strokeStyle;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(shield.material, centerX + radius + 10, centerY - radius + 15);
                
                // é®è”½åŠ¹æœè¡¨ç¤º
                if (isLead) {
                    ctx.fillText('é«˜é®è”½', centerX + radius + 10, centerY - radius + 30);
                } else {
                    ctx.fillText('ä¸­é®è”½', centerX + radius + 10, centerY - radius + 30);
                }
            });
        }
        
        // ç·šæºæç”»
        function drawSources(centerX, centerY) {
            sources.forEach(source => {
                const time = animationTime * 0.003;
                const glow = 0.4 + Math.sin(time) * 0.3;
                
                // è¼ã
                const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 25);
                gradient.addColorStop(0, `rgba(255, 100, 100, ${glow})`);
                gradient.addColorStop(1, 'rgba(255, 100, 100, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(centerX, centerY, 25, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç·šæºæœ¬ä½“
                ctx.fillStyle = '#ff0000';
                ctx.beginPath();
                ctx.arc(centerX, centerY, 10, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ”¾å°„ç·š
                for (let i = 0; i < 8; i++) {
                    const angle = (i / 8) * Math.PI * 2 + time * 0.5;
                    const x1 = centerX + Math.cos(angle) * 15;
                    const y1 = centerY + Math.sin(angle) * 15;
                    const x2 = centerX + Math.cos(angle) * 22;
                    const y2 = centerY + Math.sin(angle) * 22;
                    
                    ctx.strokeStyle = `rgba(255, 200, 0, ${glow})`;
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }
                
                // ãƒ©ãƒ™ãƒ«
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(source.nuclide, centerX, centerY + 4);
                
                // æ”¾å°„èƒ½è¡¨ç¤º
                ctx.fillStyle = '#000';
                ctx.font = '8px Arial';
                const activity = (source.activity / 1e9).toFixed(1) + ' GBq';
                ctx.fillText(activity, centerX, centerY + 35);
            });
        }
        
        // æ¤œå‡ºå™¨æç”»ï¼ˆæ”¹è‰¯ç‰ˆ - æ´»å‹•ã‚’æ˜ç¢ºè¡¨ç¤ºï¼‰
        function drawDetectors(centerX, centerY) {
            detectors.forEach(detector => {
                const count = detector.grid[0] ? detector.grid[0].number || 5 : 1;
                const time = animationTime * 0.001;
                
                // ãƒ˜ãƒƒãƒ€ãƒ¼æç”»
                ctx.fillStyle = '#006600';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'left';
                ctx.fillText('ğŸ” ' + detector.name, centerX + 120, centerY - 50);
                
                ctx.font = '10px Arial';
                ctx.fillText('ç·šé‡ç‡ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°', centerX + 120, centerY - 35);
                
                for (let i = 0; i < count; i++) {
                    const x = centerX + 120 + (i % 4) * 45; // 4åˆ—é…ç½®
                    const y = centerY - 20 + Math.floor(i / 4) * 60; // è¡Œé…ç½®
                    
                    const detectorKey = `${detector.name}_${i}`;
                    const detectorData = detectorCounts.get(detectorKey);
                    
                    // æ¤œå‡ºå™¨ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
                    const countValue = detectorData ? detectorData.count : 0;
                    const doseRate = detectorData ? detectorData.doseRate : 0;
                    const distance = detectorData ? detectorData.distance : 100;
                    
                    // æ´»å‹•ãƒ¬ãƒ™ãƒ«ï¼ˆè¨ˆæ•°ç‡ã«åŸºã¥ãï¼‰
                    const activityLevel = Math.min(countValue / 1000, 1.0); // æ­£è¦åŒ–
                    const pulseIntensity = 0.3 + Math.sin(time * (3 + i * 0.5)) * 0.4 * activityLevel;
                    
                    // æ¤œå‡ºå™¨æœ¬ä½“ï¼ˆå››è§’å½¢ï¼‰
                    ctx.fillStyle = '#00aa00';
                    ctx.fillRect(x - 8, y - 8, 16, 16);
                    
                    // æ¤œå‡ºå™¨ã®æ 
                    ctx.strokeStyle = '#006600';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(x - 8, y - 8, 16, 16);
                    
                    // æ´»å‹•ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ï¼ˆä¸­å¤®ã®å††ï¼‰- å¤§ãã•ã¨è‰²ã§æ´»å‹•ãƒ¬ãƒ™ãƒ«è¡¨ç¤º
                    const indicatorRadius = 2 + activityLevel * 4;
                    ctx.fillStyle = `rgba(0, 255, 0, ${pulseIntensity})`;
                    ctx.beginPath();
                    ctx.arc(x, y, indicatorRadius, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // é«˜æ´»å‹•æ™‚ã®è¼ãã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                    if (activityLevel > 0.5) {
                        ctx.fillStyle = `rgba(255, 255, 0, ${pulseIntensity * 0.3})`;
                        ctx.beginPath();
                        ctx.arc(x, y, indicatorRadius + 2, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                    
                    // è¨ˆæ•°ç‡è¡¨ç¤ºï¼ˆæ•°å€¤ï¼‰
                    ctx.fillStyle = '#003300';
                    ctx.font = 'bold 8px Arial';
                    ctx.textAlign = 'center';
                    
                    if (countValue > 0) {
                        let displayCount;
                        if (countValue >= 1000) {
                            displayCount = (countValue / 1000).toFixed(1) + 'k';
                        } else {
                            displayCount = countValue.toString();
                        }
                        ctx.fillText(displayCount, x, y + 20);
                        ctx.fillText('cps', x, y + 30);
                        
                        // ç·šé‡ç‡è¡¨ç¤º
                        ctx.font = '6px Arial';
                        ctx.fillText(doseRate.toFixed(1) + 'Î¼Sv/h', x, y + 40);
                    } else {
                        ctx.fillText('---', x, y + 20);
                        ctx.fillText('cps', x, y + 30);
                    }
                    
                    // æ¤œå‡ºå™¨ç•ªå·
                    ctx.font = '6px Arial';
                    ctx.fillStyle = '#666';
                    ctx.fillText(`D${i+1}`, x, y - 12);
                    
                    // è·é›¢è¡¨ç¤º
                    ctx.fillText(`${distance}cm`, x, y + 48);
                }
            });
        }
        
        // æƒ…å ±æç”»
        function drawInfo() {
            ctx.fillStyle = '#000';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('2Då¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ï¼‰', 15, 25);
            
            ctx.font = '12px Arial';
            ctx.fillText(`ç·šæº: ${sources.size}å€‹`, 15, 45);
            ctx.fillText(`é®è”½ä½“: ${shields.size}å€‹`, 15, 60);
            ctx.fillText(`æ¤œå‡ºå™¨: ${detectors.size}å€‹`, 15, 75);
            
            // æ¤œå‡ºå™¨ã®èª¬æ˜
            if (detectors.size > 0) {
                ctx.font = '10px Arial';
                ctx.fillStyle = '#006600';
                ctx.fillText('ğŸŸ¢ = æ¤œå‡ºå™¨æœ¬ä½“', 15, 95);
                ctx.fillText('âšª = ç·šé‡ç‡ãƒ¬ãƒ™ãƒ«', 15, 105);
                ctx.fillText('æ•°å€¤ = è¨ˆæ•°ç‡(cps)', 15, 115);
            }
            
            // æ™‚åˆ»
            const time = new Date().toLocaleTimeString();
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(time, canvas.width - 15, 20);
        }
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function startAnimation() {
            function animate() {
                animationTime = Date.now();
                render();
                animationId = requestAnimationFrame(animate);
            }
            animate();
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—åˆ¶å¾¡
        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateStepVisualization();
                updateUI();
                interactions++;
            } else {
                alert('ğŸ‰ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å®Œäº†ï¼\n\næ”¾å°„ç·šé®è”½è¨ˆç®—ã®åŸºæœ¬ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚\næ¤œå‡ºå™¨ã®è¨ˆæ•°ç‡å¤‰åŒ–ã«ã‚ˆã‚Šé®è”½åŠ¹æœã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚');
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepVisualization();
                updateUI();
            }
        }
        
        function resetTutorial() {
            if (confirm('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                currentStep = 1;
                clearAll();
                updateUI();
                interactions = 0;
            }
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—å¯è¦–åŒ–æ›´æ–°
        function updateStepVisualization() {
            clearAll();
            
            if (currentStep >= 1) {
                addSource('co60_medical', [0, 0, 0], 'Co60', 37000000000);
            }
            if (currentStep >= 2) {
                addShield('concrete_shield', 'SPH', {center: [0, 0, 0], radius: 50}, 'CONCRETE');
            }
            if (currentStep >= 3) {
                addDetector('dose_survey', [60, 0, 0], [{edge: [10, 0, 0], number: 8}]);
            }
            if (currentStep >= 4) {
                addShield('lead_inner_shield', 'SPH', {center: [0, 0, 0], radius: 18}, 'LEAD');
            }
            
            updateObjectInfo();
        }
        
        // UIæ›´æ–°
        function updateUI() {
            const step = steps[currentStep - 1];
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹
            document.getElementById('progressFill').style.width = (currentStep / totalSteps * 100) + '%';
            document.getElementById('progressText').textContent = `Step ${currentStep} / ${totalSteps}`;
            
            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
            document.getElementById('contentArea').innerHTML = `
                <div class="step-content">
                    <h2>${step.title}</h2>
                    <div class="step-description">
                        <p><strong>æ¦‚è¦:</strong> ${step.content}</p>
                        <p><strong>å­¦ç¿’ç›®æ¨™:</strong> ${step.learning}</p>
                    </div>
                </div>
            `;
            
            // JSON
            document.getElementById('jsonInput').value = step.json;
            
            // ãƒœã‚¿ãƒ³
            document.getElementById('prevBtn').disabled = currentStep === 1;
            document.getElementById('nextBtn').textContent = currentStep === totalSteps ? 'ğŸ‰ å®Œäº†' : 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— â¡ï¸';
        }
        
        // JSONæ“ä½œ
        function executeJson() {
            const input = document.getElementById('jsonInput').value;
            const output = document.getElementById('jsonOutput');
            interactions++;
            
            try {
                const request = JSON.parse(input);
                
                const response = {
                    jsonrpc: "2.0",
                    result: {
                        success: true,
                        message: `${request.method} ãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã¾ã—ãŸ`,
                        timestamp: new Date().toISOString(),
                        detectorCounts: Array.from(detectorCounts.entries()).map(([key, data]) => ({
                            detector: key,
                            count: data.count,
                            doseRate: data.doseRate
                        }))
                    },
                    id: request.id
                };
                
                output.textContent = JSON.stringify(response, null, 2);
                output.className = 'output-content success';
                
                updateFromJson(request);
                
            } catch (error) {
                const errorResponse = {
                    jsonrpc: "2.0",
                    error: { code: -32700, message: "Parse error", data: error.message },
                    id: null
                };
                
                output.textContent = JSON.stringify(errorResponse, null, 2);
                output.className = 'output-content error';
            }
        }
        
        function validateJson() {
            const input = document.getElementById('jsonInput').value;
            const output = document.getElementById('jsonOutput');
            
            try {
                const parsed = JSON.parse(input);
                const validations = [];
                
                if (parsed.jsonrpc !== "2.0") validations.push("âš ï¸ JSON-RPC 2.0ã§ã¯ã‚ã‚Šã¾ã›ã‚“");
                if (!parsed.method) validations.push("âŒ methodãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“");
                if (parsed.id === undefined) validations.push("âš ï¸ idãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“");
                
                if (validations.length === 0) {
                    output.textContent = 'âœ… JSONå½¢å¼ã¯æ­£ã—ã„ã§ã™';
                    output.className = 'output-content success';
                } else {
                    output.textContent = 'æ¤œè¨¼çµæœ:\n' + validations.join('\n');
                    output.className = 'output-content error';
                }
            } catch (error) {
                output.textContent = `âŒ JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                output.className = 'output-content error';
            }
        }
        
        function clearJson() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('jsonOutput').textContent = 'çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...';
            document.getElementById('jsonOutput').className = 'output-content';
        }
        
        // JSON->å¯è¦–åŒ–
        function updateFromJson(request) {
            const method = request.method;
            const params = request.params;
            
            try {
                if (method === 'pokerinput_proposeSource' && params) {
                    const pos = params.position ? params.position.split(' ').map(Number) : [0, 0, 0];
                    const nuclide = params.inventory?.[0]?.nuclide || 'Unknown';
                    const activity = params.inventory?.[0]?.radioactivity || 0;
                    addSource(params.name, pos, nuclide, activity);
                    
                } else if (method === 'pokerinput_proposeBody' && params) {
                    const center = params.center ? params.center.split(' ').map(Number) : [0, 0, 0];
                    const material = params.name?.includes('lead') ? 'LEAD' : 'CONCRETE';
                    addShield(params.name, params.type, {center, radius: params.radius}, material);
                    
                } else if (method === 'pokerinput_proposeDetector' && params) {
                    const origin = params.origin ? params.origin.split(' ').map(Number) : [0, 0, 0];
                    addDetector(params.name, origin, params.grid || []);
                }
                
                updateObjectInfo();
                
            } catch (error) {
                showMessage(`æ›´æ–°ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }
        
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        function showMessage(text) {
            document.getElementById('vizMessage').textContent = text;
            setTimeout(() => {
                document.getElementById('vizMessage').textContent = 'âœ… å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œä¸­ - æ¤œå‡ºå™¨ã®æ´»å‹•ã‚’è¦³å¯Ÿã—ã¦ãã ã•ã„';
            }, 4000);
        }
        
        function updateObjectInfo() {
            document.getElementById('objectInfo').textContent = 
                `ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: ç·šæº ${sources.size}å€‹ | é®è”½ä½“ ${shields.size}å€‹ | æ¤œå‡ºå™¨ ${detectors.size}å€‹`;
        }
        
        function showInfo() {
            const totalDetectors = Array.from(detectors.values()).reduce((sum, d) => sum + (d.grid[0]?.number || 1), 0);
            const avgCount = Array.from(detectorCounts.values()).reduce((sum, d) => sum + d.count, 0) / Math.max(detectorCounts.size, 1);
            
            const info = `=== æ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ç‰ˆã‚·ã‚¹ãƒ†ãƒ æƒ…å ± ===

ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹:
â€¢ ãƒ¢ãƒ¼ãƒ‰: 2Då¯è¦–åŒ–ï¼ˆæ¤œå‡ºå™¨æ´»å‹•å¼·èª¿ï¼‰
â€¢ Canvas: 600x400
â€¢ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: å‹•ä½œä¸­

ğŸ¨ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:
â€¢ ç·šæº: ${sources.size}å€‹
â€¢ é®è”½ä½“: ${shields.size}å€‹
â€¢ æ¤œå‡ºå™¨: ${totalDetectors}å€‹

ğŸ” æ¤œå‡ºå™¨æ´»å‹•:
â€¢ å¹³å‡è¨ˆæ•°ç‡: ${avgCount.toFixed(0)} cps
â€¢ é®è”½åŠ¹æœ: ${shields.size > 0 ? 'æœ‰åŠ¹' : 'ç„¡ã—'}
â€¢ è·é›¢æ¸›è¡°: é€†äºŒä¹—æ³•å‰‡é©ç”¨

ğŸ“š å­¦ç¿’é€²æ—:
â€¢ ã‚¹ãƒ†ãƒƒãƒ—: ${currentStep}/${totalSteps}
â€¢ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³: ${interactions}å›

ğŸ¯ æ¤œå‡ºå™¨è¡¨ç¤ºã®è¦‹æ–¹:
â€¢ ğŸŸ¢ ç·‘ã®å››è§’: æ¤œå‡ºå™¨æœ¬ä½“
â€¢ âšª ä¸­å¤®ã®å††: ç·šé‡ç‡ãƒ¬ãƒ™ãƒ«ï¼ˆå¤§ãã•ã¨è¼ãã§è¡¨ç¤ºï¼‰
â€¢ æ•°å€¤: è¨ˆæ•°ç‡(cps)ã¨ç·šé‡ç‡(Î¼Sv/h)
â€¢ D1, D2...: æ¤œå‡ºå™¨ç•ªå·
â€¢ è·é›¢: ç·šæºã‹ã‚‰ã®è·é›¢(cm)

ğŸ’¡ è¦³å¯Ÿãƒã‚¤ãƒ³ãƒˆ:
â€¢ ç·šæºè¿½åŠ : æ¤œå‡ºå™¨ã®è¨ˆæ•°ç‡ä¸Šæ˜‡
â€¢ é®è”½ä½“è¿½åŠ : è¨ˆæ•°ç‡ã®æ¸›å°‘
â€¢ è·é›¢åŠ¹æœ: é ã„æ¤œå‡ºå™¨ã»ã©ä½è¨ˆæ•°ç‡
â€¢ ææ–™åŠ¹æœ: é‰›ï¼ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ`;
            
            alert(info);
        }
        
        // åˆæœŸåŒ–å®Ÿè¡Œ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
        console.log('âœ… æ¤œå‡ºå™¨æ”¹è‰¯ç‰ˆã‚·ã‚¹ãƒ†ãƒ èª­ã¿è¾¼ã¿å®Œäº†');
    </script>
</body>
</html>
