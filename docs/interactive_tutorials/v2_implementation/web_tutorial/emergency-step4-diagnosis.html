<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ğŸš¨ Step 3â†’4 é€²è¡Œå¤±æ•— ç·Šæ€¥è¨ºæ–­</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #fff5f5; }
        .emergency-panel { margin: 15px 0; padding: 20px; background: white; border-radius: 8px; border: 2px solid #e53e3e; }
        .debug-panel { margin: 15px 0; padding: 15px; background: #f7fafc; border-radius: 6px; border-left: 4px solid #3182ce; }
        .success { background: #f0fff4; border-color: #38a169; }
        .error { background: #fed7d7; border-color: #e53e3e; }
        .warning { background: #fffaf0; border-color: #dd6b20; }
        .critical { background: #fed7d7; border: 3px solid #c53030; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        button { padding: 12px 20px; margin: 8px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-emergency { background: #e53e3e; color: white; font-size: 16px; }
        .btn-test { background: #3182ce; color: white; }
        .btn-fix { background: #38a169; color: white; }
        pre { background: #1a202c; color: #e2e8f0; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 11px; }
        .log-entry { margin: 5px 0; padding: 8px; border-radius: 4px; font-family: monospace; font-size: 12px; }
        .log-info { background: #ebf8ff; border-left: 4px solid #3182ce; }
        .log-error { background: #fed7d7; border-left: 4px solid #e53e3e; }
        .log-success { background: #f0fff4; border-left: 4px solid #38a169; }
        .step-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    </style>
</head>
<body>
    <h1>ğŸš¨ Step 3â†’4 é€²è¡Œå¤±æ•— ç·Šæ€¥è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ </h1>
    
    <div class="emergency-panel critical">
        <h2>ğŸš¨ ç·Šæ€¥äº‹æ…‹: Step 3â†’4 é€²è¡Œä¸å¯</h2>
        <p><strong>ç—‡çŠ¶:</strong> ç¶šã‘ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾Œã€Step 3ã®ã¾ã¾ã§Step 4ã«é€²è¡Œã—ãªã„</p>
        <button onclick="emergencyDiagnosis()" class="btn-emergency">ğŸ” ç·Šæ€¥è¨ºæ–­å®Ÿè¡Œ</button>
        <button onclick="forceStep4()" class="btn-fix">âš¡ Step 4å¼·åˆ¶ç§»è¡Œ</button>
        <button onclick="deepInvestigation()" class="btn-test">ğŸ•µï¸ è©³ç´°èª¿æŸ»</button>
    </div>

    <div id="diagnosticResults"></div>
    
    <div class="debug-panel">
        <h3>ğŸ“‹ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²è¡Œç›£è¦–</h3>
        <div id="progressMonitor"></div>
        <button onclick="startProgressMonitoring()" class="btn-test">ğŸ“Š é€²è¡Œç›£è¦–é–‹å§‹</button>
        <button onclick="stopProgressMonitoring()" class="btn-emergency">â¹ï¸ ç›£è¦–åœæ­¢</button>
    </div>

    <script src="physics-validator.js"></script>
    <script src="cross-section-visualizer.js"></script>
    <script src="tutorial.js"></script>

    <script>
        let resultsDiv = document.getElementById('diagnosticResults');
        let progressMonitor = document.getElementById('progressMonitor');
        let monitoringInterval = null;

        function addResult(title, type, message, details = '') {
            const resultDiv = document.createElement('div');
            resultDiv.className = `debug-panel ${type}`;
            resultDiv.innerHTML = `
                <h3>${getTypeIcon(type)} ${title}</h3>
                <p><strong>çµæœ:</strong> ${message}</p>
                ${details ? `<pre>${details}</pre>` : ''}
                <small>è¨ºæ–­æ™‚åˆ»: ${new Date().toLocaleTimeString()}</small>
            `;
            resultsDiv.appendChild(resultDiv);
        }

        function getTypeIcon(type) {
            switch(type) {
                case 'success': return 'âœ…';
                case 'error': return 'âŒ';
                case 'warning': return 'âš ï¸';
                case 'critical': return 'ğŸš¨';
                default: return 'â„¹ï¸';
            }
        }

        function emergencyDiagnosis() {
            resultsDiv.innerHTML = '<div class="debug-panel warning"><h3>ğŸ”„ ç·Šæ€¥è¨ºæ–­å®Ÿè¡Œä¸­...</h3></div>';
            
            console.log('ğŸš¨ ç·Šæ€¥è¨ºæ–­é–‹å§‹');
            
            // 1. ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«åŸºæœ¬çŠ¶æ…‹
            diagnoseTutorialState();
            
            // 2. Step 3â†’4ã®å…·ä½“çš„å•é¡Œ
            diagnoseStep3to4Problem();
            
            // 3. DOMè¦ç´ ã¨ã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´°ç¢ºèª
            diagnoseDOMAndEvents();
            
            // 4. nextStep()ãƒ¡ã‚½ãƒƒãƒ‰ã®å†…éƒ¨å‹•ä½œç¢ºèª
            diagnoseNextStepMethod();
            
            // 5. Step 4ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨æ€§ç¢ºèª
            diagnoseStep4Data();
        }

        function diagnoseTutorialState() {
            try {
                if (!window.tutorial) {
                    addResult('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«çŠ¶æ…‹', 'critical', 'window.tutorialãŒå­˜åœ¨ã—ã¾ã›ã‚“');
                    return;
                }

                const tutorial = window.tutorial;
                const state = {
                    currentStep: tutorial.currentStep,
                    totalSteps: tutorial.totalSteps,
                    stepsLoaded: tutorial.tutorialSteps?.length,
                    stepExecutionHistory: tutorial.stepExecutionHistory?.length || 0,
                    isFollowUpStep: tutorial.isFollowUpStep
                };

                addResult('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«åŸºæœ¬çŠ¶æ…‹', 'success', 
                    'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å­˜åœ¨ã—ã¾ã™',
                    `çŠ¶æ…‹è©³ç´°:\n${JSON.stringify(state, null, 2)}`
                );

            } catch (error) {
                addResult('ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«çŠ¶æ…‹', 'error', `çŠ¶æ…‹ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function diagnoseStep3to4Problem() {
            try {
                if (!window.tutorial) return;

                const tutorial = window.tutorial;
                
                // ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒæœ¬å½“ã«3ãªã®ã‹ç¢ºèª
                const currentStepElement = document.getElementById('stepBadge');
                const stepTitleElement = document.getElementById('stepTitle');
                
                const uiState = {
                    stepBadgeText: currentStepElement?.textContent,
                    stepTitleText: stepTitleElement?.textContent,
                    tutorialCurrentStep: tutorial.currentStep,
                    expectedStep3Title: tutorial.tutorialSteps?.[2]?.title,
                    expectedStep4Title: tutorial.tutorialSteps?.[3]?.title
                };

                const isActuallyStep3 = tutorial.currentStep === 3;
                const titleMatchesStep3 = stepTitleElement?.textContent?.includes('æ¤œå‡ºå™¨');

                if (isActuallyStep3 && titleMatchesStep3) {
                    addResult('Step 3â†’4 å•é¡Œç¢ºèª', 'error',
                        'ç¢ºå®Ÿã«Step 3ã§åœæ­¢ã—ã¦ã„ã¾ã™',
                        `UIçŠ¶æ…‹:\n${JSON.stringify(uiState, null, 2)}`
                    );
                } else {
                    addResult('Step 3â†’4 å•é¡Œç¢ºèª', 'warning',
                        'StepçŠ¶æ…‹ã«ä¸æ•´åˆãŒã‚ã‚Šã¾ã™',
                        `UIçŠ¶æ…‹:\n${JSON.stringify(uiState, null, 2)}`
                    );
                }

            } catch (error) {
                addResult('Step 3â†’4 å•é¡Œç¢ºèª', 'error', `ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function diagnoseDOMAndEvents() {
            try {
                const continueBtn = document.getElementById('continueBtn');
                const modalOverlay = document.getElementById('modalOverlay');
                
                const domState = {
                    continueBtn: {
                        exists: !!continueBtn,
                        disabled: continueBtn?.disabled,
                        textContent: continueBtn?.textContent,
                        style_display: continueBtn?.style?.display,
                        onclick: !!continueBtn?.onclick,
                        eventListeners: continueBtn ? 'addEventListenerè¨­å®šæ¸ˆã¿' : 'ãªã—'
                    },
                    modalOverlay: {
                        exists: !!modalOverlay,
                        style_display: modalOverlay?.style?.display,
                        computedDisplay: modalOverlay ? window.getComputedStyle(modalOverlay).display : 'ãªã—'
                    }
                };

                // continueBtn ã‚¯ãƒªãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
                if (continueBtn) {
                    const originalOnClick = continueBtn.onclick;
                    let hasEventListener = false;
                    
                    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®å­˜åœ¨ã‚’é–“æ¥çš„ã«ç¢ºèª
                    try {
                        hasEventListener = window.tutorial?.continueBtn === continueBtn;
                    } catch (e) {}
                    
                    domState.continueBtn.hasProperEventListener = hasEventListener;
                }

                addResult('DOMãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª', continueBtn ? 'success' : 'error',
                    continueBtn ? 'DOMè¦ç´ ã¯æ­£å¸¸ã«å­˜åœ¨ã—ã¾ã™' : 'continueBtnãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
                    `DOMè©³ç´°:\n${JSON.stringify(domState, null, 2)}`
                );

            } catch (error) {
                addResult('DOMãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª', 'error', `ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function diagnoseNextStepMethod() {
            try {
                if (!window.tutorial) return;

                const tutorial = window.tutorial;
                
                // nextStepãƒ¡ã‚½ãƒƒãƒ‰ã®å­˜åœ¨ç¢ºèª
                const methodInfo = {
                    nextStepExists: typeof tutorial.nextStep === 'function',
                    updateStepContentExists: typeof tutorial.updateStepContent === 'function',
                    resetCodeExists: typeof tutorial.resetCode === 'function',
                    updateProgressExists: typeof tutorial.updateProgress === 'function',
                    hideCompletionModalExists: typeof tutorial.hideCompletionModal === 'function'
                };

                // nextStepãƒ¡ã‚½ãƒƒãƒ‰ã®æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
                const beforeStep = tutorial.currentStep;
                console.log('ğŸ§ª nextStep()æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆé–‹å§‹...');
                
                try {
                    tutorial.nextStep();
                    
                    setTimeout(() => {
                        const afterStep = tutorial.currentStep;
                        const stepChanged = afterStep !== beforeStep;
                        const reachedStep4 = afterStep === 4;
                        
                        const testResult = {
                            beforeStep,
                            afterStep,
                            stepChanged,
                            reachedStep4,
                            stepTitle: document.getElementById('stepTitle')?.textContent
                        };

                        if (stepChanged && reachedStep4) {
                            addResult('nextStep()æ‰‹å‹•ãƒ†ã‚¹ãƒˆ', 'success',
                                'nextStep()ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼',
                                `ãƒ†ã‚¹ãƒˆçµæœ:\n${JSON.stringify(testResult, null, 2)}`
                            );
                        } else {
                            addResult('nextStep()æ‰‹å‹•ãƒ†ã‚¹ãƒˆ', 'error',
                                'nextStep()ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ã¦ã„ã¾ã›ã‚“',
                                `ãƒ†ã‚¹ãƒˆçµæœ:\n${JSON.stringify(testResult, null, 2)}`
                            );
                        }
                    }, 200);

                } catch (error) {
                    addResult('nextStep()æ‰‹å‹•ãƒ†ã‚¹ãƒˆ', 'error',
                        `nextStep()å®Ÿè¡Œã§ã‚¨ãƒ©ãƒ¼: ${error.message}`,
                        `ã‚¨ãƒ©ãƒ¼è©³ç´°:\n${error.stack}`
                    );
                }

                addResult('nextStepãƒ¡ã‚½ãƒƒãƒ‰ç¢ºèª', 'success',
                    'å¿…è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯å­˜åœ¨ã—ã¾ã™',
                    `ãƒ¡ã‚½ãƒƒãƒ‰ç¢ºèª:\n${JSON.stringify(methodInfo, null, 2)}`
                );

            } catch (error) {
                addResult('nextStepãƒ¡ã‚½ãƒƒãƒ‰ç¢ºèª', 'error', `ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function diagnoseStep4Data() {
            try {
                if (!window.tutorial || !window.tutorial.tutorialSteps) {
                    addResult('Step 4ãƒ‡ãƒ¼ã‚¿ç¢ºèª', 'error', 'tutorialStepsãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                    return;
                }

                const steps = window.tutorial.tutorialSteps;
                const step4 = steps[3]; // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹3 = Step 4
                
                const step4Info = {
                    exists: !!step4,
                    step: step4?.step,
                    title: step4?.title,
                    hasTemplate: !!step4?.template,
                    templateLength: step4?.template?.length,
                    hasPhysicsBackground: !!step4?.physics_background,
                    hasInstructions: !!step4?.instructions
                };

                if (step4Info.exists && step4Info.hasTemplate) {
                    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®JSONå¦¥å½“æ€§ç¢ºèª
                    try {
                        const parsedTemplate = JSON.parse(step4.template);
                        step4Info.templateValid = true;
                        step4Info.templateMethod = parsedTemplate.method;
                    } catch (e) {
                        step4Info.templateValid = false;
                        step4Info.templateError = e.message;
                    }
                }

                addResult('Step 4ãƒ‡ãƒ¼ã‚¿ç¢ºèª', step4Info.exists ? 'success' : 'error',
                    step4Info.exists ? 'Step 4ãƒ‡ãƒ¼ã‚¿ã¯å®Œå…¨ã«å­˜åœ¨ã—ã¾ã™' : 'Step 4ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
                    `Step 4è©³ç´°:\n${JSON.stringify(step4Info, null, 2)}`
                );

            } catch (error) {
                addResult('Step 4ãƒ‡ãƒ¼ã‚¿ç¢ºèª', 'error', `ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function forceStep4() {
            try {
                if (!window.tutorial) {
                    addResult('å¼·åˆ¶Step 4ç§»è¡Œ', 'error', 'tutorialã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                    return;
                }

                console.log('âš¡ Step 4å¼·åˆ¶ç§»è¡Œé–‹å§‹...');
                const tutorial = window.tutorial;
                
                // ç¾åœ¨ã®çŠ¶æ…‹ã‚’ä¿å­˜
                const beforeState = {
                    step: tutorial.currentStep,
                    stepTitle: document.getElementById('stepTitle')?.textContent
                };

                // å¼·åˆ¶çš„ã«Step 4ã«è¨­å®š
                tutorial.currentStep = 4;
                tutorial.updateStepContent();
                tutorial.resetCode();
                tutorial.updateProgress();
                tutorial.clearResults();
                tutorial.nextBtn.disabled = true;
                
                if (tutorial.hintSection) {
                    tutorial.hintSection.style.display = 'none';
                }

                setTimeout(() => {
                    const afterState = {
                        step: tutorial.currentStep,
                        stepTitle: document.getElementById('stepTitle')?.textContent,
                        codeContent: document.getElementById('codeEditor')?.textContent?.substring(0, 100)
                    };

                    const success = afterState.step === 4 && 
                                   afterState.stepTitle?.includes('è¤‡åˆé®è”½');

                    addResult('å¼·åˆ¶Step 4ç§»è¡Œ', success ? 'success' : 'error',
                        success ? 'Step 4ã¸ã®å¼·åˆ¶ç§»è¡Œã«æˆåŠŸã—ã¾ã—ãŸ' : 'Step 4ã¸ã®å¼·åˆ¶ç§»è¡Œã«å¤±æ•—ã—ã¾ã—ãŸ',
                        `å®Ÿè¡Œå‰:\n${JSON.stringify(beforeState, null, 2)}\n\nå®Ÿè¡Œå¾Œ:\n${JSON.stringify(afterState, null, 2)}`
                    );

                }, 300);

            } catch (error) {
                addResult('å¼·åˆ¶Step 4ç§»è¡Œ', 'error', `å¼·åˆ¶ç§»è¡Œã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function deepInvestigation() {
            console.log('ğŸ•µï¸ è©³ç´°èª¿æŸ»é–‹å§‹...');
            
            try {
                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã®ãƒ­ã‚°å±¥æ­´ç¢ºèª
                const logs = [];
                const originalLog = console.log;
                const originalError = console.error;
                
                // ãƒ­ã‚°ã‚­ãƒ£ãƒ—ãƒãƒ£é–‹å§‹
                console.log = function(...args) {
                    logs.push({type: 'log', message: args.join(' '), timestamp: new Date()});
                    originalLog.apply(console, args);
                };
                
                console.error = function(...args) {
                    logs.push({type: 'error', message: args.join(' '), timestamp: new Date()});
                    originalError.apply(console, args);
                };

                // Step 3å®Œäº†ã‹ã‚‰Step 4ã¸ã®å®Œå…¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                if (window.tutorial) {
                    const tutorial = window.tutorial;
                    
                    // Step 3çŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆ
                    tutorial.currentStep = 3;
                    tutorial.updateStepContent();
                    tutorial.updateProgress();
                    tutorial.nextBtn.disabled = false;
                    
                    // å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
                    tutorial.showCompletionModal();
                    
                    setTimeout(() => {
                        // ç¶šã‘ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
                        const continueBtn = document.getElementById('continueBtn');
                        if (continueBtn) {
                            continueBtn.click();
                        } else {
                            tutorial.nextStep();
                        }
                        
                        setTimeout(() => {
                            // ãƒ­ã‚°å¾©å…ƒ
                            console.log = originalLog;
                            console.error = originalError;
                            
                            addResult('è©³ç´°èª¿æŸ»', 'success',
                                'å®Œå…¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ',
                                `ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸãƒ­ã‚°:\n${logs.map(l => `[${l.type}] ${l.message}`).join('\n')}`
                            );
                        }, 1000);
                        
                    }, 1000);
                }

            } catch (error) {
                addResult('è©³ç´°èª¿æŸ»', 'error', `èª¿æŸ»ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        }

        function startProgressMonitoring() {
            if (monitoringInterval) stopProgressMonitoring();

            monitoringInterval = setInterval(() => {
                if (window.tutorial) {
                    const tutorial = window.tutorial;
                    const now = new Date().toLocaleTimeString();
                    
                    const status = {
                        time: now,
                        currentStep: tutorial.currentStep,
                        stepTitle: document.getElementById('stepTitle')?.textContent?.substring(0, 30),
                        modalVisible: document.getElementById('modalOverlay')?.style?.display === 'flex',
                        nextBtnDisabled: tutorial.nextBtn?.disabled,
                        continueBtnExists: !!document.getElementById('continueBtn')
                    };

                    progressMonitor.innerHTML = `
                        <div class="log-entry log-info">
                            â° ${status.time} | ğŸ“ Step ${status.currentStep} | ğŸ­ Modal: ${status.modalVisible ? 'ON' : 'OFF'}
                            <br>ğŸ“ Title: ${status.stepTitle} | â¡ï¸ Next: ${status.nextBtnDisabled ? 'OFF' : 'ON'} | ğŸ”˜ Continue: ${status.continueBtnExists ? 'ON' : 'OFF'}
                        </div>
                    ` + progressMonitor.innerHTML;

                    // æœ€æ–°10ä»¶ã®ã¿ä¿æŒ
                    const entries = progressMonitor.querySelectorAll('.log-entry');
                    if (entries.length > 10) {
                        entries[entries.length - 1].remove();
                    }

                } else {
                    progressMonitor.innerHTML = `
                        <div class="log-entry log-error">
                            âŒ ${new Date().toLocaleTimeString()} | tutorialã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“
                        </div>
                    `;
                }
            }, 2000);

            addResult('é€²è¡Œç›£è¦–', 'success', 'é€²è¡Œç›£è¦–ã‚’é–‹å§‹ã—ã¾ã—ãŸ');
        }

        function stopProgressMonitoring() {
            if (monitoringInterval) {
                clearInterval(monitoringInterval);
                monitoringInterval = null;
                addResult('é€²è¡Œç›£è¦–', 'success', 'é€²è¡Œç›£è¦–ã‚’åœæ­¢ã—ã¾ã—ãŸ');
            }
        }

        // åˆæœŸçŠ¶æ…‹ç¢ºèª
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (window.tutorial) {
                    addResult('åˆæœŸçŠ¶æ…‹', 'success',
                        `ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«èª­ã¿è¾¼ã¿å®Œäº† - ç¾åœ¨Step ${window.tutorial.currentStep}`
                    );
                } else {
                    addResult('åˆæœŸçŠ¶æ…‹', 'critical', 'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—');
                }
            }, 2000);
        });
    </script>
</body>
</html>