{
  "name": "pokerinput-mcp-final",
  "version": "3.0.1",
  "description": "世界クラス YAML-based radiation shielding calculation input file management tool with enterprise-grade MCP support",
  "url": "http://localhost:3020/mcp",
  "server": {
    "command": "node",
    "args": ["src/mcp_server_final_fixed.js"],
    "cwd": ".",
    "env": {
      "NODE_ENV": "production"
    }
  },
  "capabilities": {
    "tools": true,
    "prompts": false,
    "resources": false,
    "logging": true
  },
  "metadata": {
    "author": "yoshihiro hirao",
    "license": "ISC",
    "repository": "https://github.com/example/pokerinput-mcp-final",
    "documentation": "docs/README.md",
    "manuals": "docs/manuals/INDEX.md",
    "status": "production",
    "quality_level": "enterprise",
    "last_updated": "2025-08-17"
  },
  "config": {
    "data_file": "tasks/pokerinputs.yaml",
    "pending_file": "tasks/pending_changes.json",
    "backup_directory": "backups/",
    "log_directory": "logs/",
    "max_backups": 10,
    "auto_backup": true,
    "real_data_update": true
  },
  "tools": [
    {
      "name": "pokerinput.proposeBody",
      "description": "新しい3D立体を提案します（自動バックアップ付き）",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "立体の一意な名前"
          },
          "type": {
            "type": "string", 
            "description": "立体タイプ",
            "enum": ["SPH", "RCC", "RPP", "BOX", "TOR", "ELL", "TRC", "WED", "CMB"]
          },
          "center": {
            "type": "string",
            "description": "中心座標 (x y z形式)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "radius": {
            "type": "number",
            "description": "半径 (SPH, RCC用)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "axis": {
            "type": "string", 
            "description": "軸ベクトル (RCC, TRC用)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "height": {
            "type": "number",
            "description": "高さ (RCC, TRC用)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "min": {
            "type": "string",
            "description": "最小座標 (RPP用)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "max": {
            "type": "string",
            "description": "最大座標 (RPP用)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "vertex": {
            "type": "string",
            "description": "頂点座標 (BOX, WED用)"
          },
          "vector1": {
            "type": "string",
            "description": "ベクトル1 (BOX, WED, ELL用)"
          },
          "vector2": {
            "type": "string",
            "description": "ベクトル2 (BOX, WED, ELL用)"
          },
          "vector3": {
            "type": "string",
            "description": "ベクトル3 (BOX, WED, ELL用)"
          },
          "radius1": {
            "type": "number",
            "description": "半径1 (TOR用の主半径)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "radius2": {
            "type": "number", 
            "description": "半径2 (TOR用の副半径)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "top_radius": {
            "type": "number",
            "description": "上面半径 (TRC用)",
            "minimum": 0
          },
          "operation": {
            "type": "string",
            "description": "集合演算 (CMB用)",
            "enum": ["union", "intersection", "difference"]
          },
          "operands": {
            "type": "array",
            "description": "演算対象の立体名リスト (CMB用)",
            "items": {
              "type": "string"
            },
            "minItems": 2
          },
          "transform": {
            "type": "string",
            "description": "変換名（事前定義された回転・移動）"
          }
        },
        "required": ["name", "type"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.updateBody", 
      "description": "既存立体のパラメータを更新します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "更新する立体の名前"
          },
          "updates": {
            "type": "object",
            "description": "更新するパラメータのオブジェクト",
            "additionalProperties": true
          }
        },
        "required": ["name", "updates"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.deleteBody",
      "description": "立体を削除します（依存関係もチェック）",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "削除する立体の名前"
          }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.proposeZone",
      "description": "材料ゾーンを提案します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "body_name": {
            "type": "string", 
            "description": "ゾーンが適用される立体名"
          },
          "material": {
            "type": "string",
            "description": "材料名"
          },
          "density": {
            "type": "number",
            "description": "密度 (g/cm³)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "temperature": {
            "type": "number",
            "description": "温度 (K)",
            "minimum": 0
          }
        },
        "required": ["body_name", "material", "density"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.updateZone",
      "description": "既存ゾーンの材料・密度を更新します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "body_name": {
            "type": "string",
            "description": "更新するゾーンの立体名"
          },
          "updates": {
            "type": "object", 
            "description": "更新するパラメータ",
            "additionalProperties": true
          }
        },
        "required": ["body_name", "updates"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.deleteZone",
      "description": "材料ゾーンを削除します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "body_name": {
            "type": "string",
            "description": "削除するゾーンの立体名"
          }
        },
        "required": ["body_name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.proposeTransform",
      "description": "回転・移動変換を提案します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "変換の一意な名前"
          },
          "type": {
            "type": "string",
            "description": "変換タイプ",
            "enum": ["rotation", "translation", "combined"]
          },
          "rotation_axis": {
            "type": "string",
            "description": "回転軸ベクトル (rotation用)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "rotation_angle": {
            "type": "number",
            "description": "回転角度（度）",
            "minimum": -360,
            "maximum": 360
          },
          "translation": {
            "type": "string", 
            "description": "平行移動ベクトル",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          }
        },
        "required": ["name", "type"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.updateTransform",
      "description": "既存変換のパラメータを更新します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "更新する変換名"
          },
          "updates": {
            "type": "object",
            "description": "更新するパラメータ",
            "additionalProperties": true
          }
        },
        "required": ["name", "updates"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.deleteTransform",
      "description": "変換を削除します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "削除する変換名"
          }
        },
        "required": ["name"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.proposeBuildupFactor",
      "description": "ビルドアップ係数を提案します", 
      "inputSchema": {
        "type": "object",
        "properties": {
          "material": {
            "type": "string",
            "description": "材料名",
            "examples": ["Concrete", "Lead", "Steel", "Water"]
          },
          "energy": {
            "type": "number",
            "description": "γ線エネルギー (MeV)",
            "minimum": 0.01,
            "maximum": 20.0
          },
          "thickness": {
            "type": "number",
            "description": "材料厚さ (cm)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "factor": {
            "type": "number",
            "description": "ビルドアップ係数値",
            "minimum": 1.0
          },
          "formula": {
            "type": "string",
            "description": "ビルドアップ係数計算式",
            "enum": ["Taylor", "Berger", "ANSI/ANS-6.4.3"],
            "default": "Taylor"
          },
          "coefficients": {
            "type": "array",
            "description": "計算式の係数パラメータ",
            "items": {
              "type": "number"
            },
            "minItems": 2,
            "maxItems": 10
          }
        },
        "required": ["material", "energy", "thickness", "factor"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.updateBuildupFactor",
      "description": "ビルドアップ係数を更新します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "material": {
            "type": "string",
            "description": "材料名"
          },
          "energy": {
            "type": "number",
            "description": "γ線エネルギー (MeV)",
            "minimum": 0.01,
            "maximum": 20.0
          },
          "updates": {
            "type": "object",
            "description": "更新するパラメータ",
            "properties": {
              "thickness": {
                "type": "number",
                "minimum": 0,
                "exclusiveMinimum": true
              },
              "factor": {
                "type": "number",
                "minimum": 1.0
              },
              "formula": {
                "type": "string",
                "enum": ["Taylor", "Berger", "ANSI/ANS-6.4.3"]
              },
              "coefficients": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "minItems": 2,
                "maxItems": 10
              }
            },
            "additionalProperties": false
          }
        },
        "required": ["material", "energy", "updates"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.deleteBuildupFactor",
      "description": "ビルドアップ係数を削除します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "material": {
            "type": "string",
            "description": "材料名"
          },
          "energy": {
            "type": "number",
            "description": "γ線エネルギー (MeV)",
            "minimum": 0.01,
            "maximum": 20.0
          }
        },
        "required": ["material", "energy"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.changeOrderBuildupFactor",
      "description": "ビルドアップ係数の計算順序を変更します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "material": {
            "type": "string",
            "description": "材料名"
          },
          "new_order": {
            "type": "array",
            "description": "新しい順序のエネルギー配列 (MeV)",
            "items": {
              "type": "number",
              "minimum": 0.01,
              "maximum": 20.0
            },
            "minItems": 2,
            "uniqueItems": true
          }
        },
        "required": ["material", "new_order"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.proposeSource",
      "description": "放射線源を提案します",
      "inputSchema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "線源名"
          },
          "type": {
            "type": "string",
            "description": "線源タイプ",
            "enum": ["point", "surface", "volume"]
          },
          "position": {
            "type": "string",
            "description": "線源位置 (x y z形式)",
            "pattern": "^-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?\\s+-?\\d+(\\.\\d+)?$"
          },
          "energy": {
            "type": "number",
            "description": "主要エネルギー (MeV)",
            "minimum": 0.001,
            "maximum": 20.0
          },
          "intensity": {
            "type": "number",
            "description": "放射能強度 (Bq)",
            "minimum": 0,
            "exclusiveMinimum": true
          },
          "spectrum": {
            "type": "object",
            "description": "エネルギースペクトラム",
            "properties": {
              "energies": {
                "type": "array",
                "items": {
                  "type": "number",
                  "minimum": 0.001
                }
              },
              "probabilities": {
                "type": "array",
                "items": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                }
              }
            },
            "additionalProperties": false
          }
        },
        "required": ["name", "type", "energy", "intensity"],
        "additionalProperties": false
      }
    },
    {
      "name": "pokerinput.applyChanges",
      "description": "保留中の全変更を実際のYAMLファイルに適用します（自動バックアップ実行）",
      "inputSchema": {
        "type": "object",
        "properties": {
          "force": {
            "type": "boolean",
            "description": "強制適用フラグ（警告を無視）",
            "default": false
          },
          "backup_comment": {
            "type": "string",
            "description": "バックアップのコメント",
            "maxLength": 200
          }
        },
        "additionalProperties": false
      }
    }
  ]
}
